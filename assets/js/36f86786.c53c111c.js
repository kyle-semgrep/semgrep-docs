"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[53973],{85:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>g,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"kb/semgrep-code/collect-cli-logs","title":"How to collect logs when running Semgrep in CLI","description":"How to collect logs when running Semgrep on the command line.","source":"@site/docs/kb/semgrep-code/collect-cli-logs.md","sourceDirName":"kb/semgrep-code","slug":"/kb/semgrep-code/collect-cli-logs","permalink":"/semgrep-docs/kb/semgrep-code/collect-cli-logs","draft":false,"unlisted":false,"editUrl":"https://github.com/kyle-semgrep/semgrep-docs/edit/main?base=kyle-semgrep:main/docs/kb/semgrep-code/collect-cli-logs.md","tags":[{"inline":true,"label":"Semgrep CLI","permalink":"/semgrep-docs/tags/semgrep-cli"},{"inline":true,"label":"Logs","permalink":"/semgrep-docs/tags/logs"}],"version":"current","lastUpdatedAt":1752254305000,"frontMatter":{"tags":["Semgrep CLI","Logs"],"description":"How to collect logs when running Semgrep on the command line."},"sidebar":"kbSidebar","previous":{"title":"Troubleshoot ValueError: Invalid header value error","permalink":"/semgrep-docs/kb/semgrep-code/InvalidHeaderValue"},"next":{"title":"Why isn\u2019t Semgrep reporting all my tainted data flows?","permalink":"/semgrep-docs/kb/semgrep-code/finding_all_taints"}}');var i=s(74848),r=s(28453);const t={tags:["Semgrep CLI","Logs"],description:"How to collect logs when running Semgrep on the command line."},l="How to collect logs when running Semgrep in CLI",c={},d=[{value:"Capturing full log output",id:"capturing-full-log-output",level:2},{value:"Separating findings and other logs",id:"separating-findings-and-other-logs",level:2},{value:"Formatting findings",id:"formatting-findings",level:3},{value:"Logging verbosity options",id:"logging-verbosity-options",level:2},{value:"Additional references",id:"additional-references",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"how-to-collect-logs-when-running-semgrep-in-cli",children:"How to collect logs when running Semgrep in CLI"})}),"\n",(0,i.jsxs)(n.p,{children:["When troubleshooting Semgrep scans on the command line interface (CLI), collecting and sharing logs can be extremely helpful. By default, Semgrep prints findings from a scan to ",(0,i.jsx)(n.code,{children:"stdout"}),", and other messages, including scan details and progress, to ",(0,i.jsx)(n.code,{children:"stderr"}),". For troubleshooting, it's best to provide both."]}),"\n",(0,i.jsxs)(n.p,{children:["To collect all relevant logs for a scan, follow these instructions. All log output options apply to both ",(0,i.jsx)(n.code,{children:"semgrep scan"})," and ",(0,i.jsx)(n.code,{children:"semgrep ci"}),". All examples use ",(0,i.jsx)(n.code,{children:"semgrep ci"})," for simplicity, and name the output file as ",(0,i.jsx)(n.code,{children:"semgrep.log"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"capturing-full-log-output",children:"Capturing full log output"}),"\n",(0,i.jsx)(n.p,{children:"To store the entire Semgrep log for a scan, including the findings:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"semgrep ci &> semgrep.log\n"})}),"\n",(0,i.jsx)(n.h2,{id:"separating-findings-and-other-logs",children:"Separating findings and other logs"}),"\n",(0,i.jsx)(n.p,{children:"Sometimes it's helpful to separate findings from other scan logs. Using the following commands separates the two and allows for independent review of findings and scan behavior."}),"\n",(0,i.jsx)(n.p,{children:"Write only findings to a file, print other logs to the terminal:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"semgrep ci > semgrep.log\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Separate findings and logs by writing findings to ",(0,i.jsx)(n.code,{children:"findings.txt"})," and logs to ",(0,i.jsx)(n.code,{children:"semgrep.log"})," through either of the following commands:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"semgrep ci -o findings.txt 2> semgrep.log\nsemgrep ci > findings.txt 2> semgrep.log\n"})}),"\n",(0,i.jsx)(n.p,{children:"Write logs to a file, print findings to the terminal:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"semgrep ci 2> semgrep.log\n"})}),"\n",(0,i.jsx)(n.h3,{id:"formatting-findings",children:"Formatting findings"}),"\n",(0,i.jsx)(n.p,{children:"Semgrep can output findings in a variety of formats. By default, the findings are formatted as readable text in the terminal, but they can also be output in other formats such as JSON or SARIF. For example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"semgrep ci --json -o findings.json 2> semgrep.log\n"})}),"\n",(0,i.jsxs)(n.p,{children:["outputs findings as JSON and saves the scan log to ",(0,i.jsx)(n.code,{children:"semgrep.log"}),"."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["The JSON schema for Semgrep's CLI output can be found in ",(0,i.jsx)(n.a,{href:"https://github.com/semgrep/semgrep-interfaces/blob/main/semgrep_output_v1.jsonschema",children:"semgrep/semgrep-interfaces"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["In addition to findings formats, there are options to add details of the data flow (",(0,i.jsx)(n.code,{children:"--dataflow-traces"}),") or explanations of rule matching (",(0,i.jsx)(n.code,{children:"--matching-explanations"}),"). These are less frequently used in overall scan troubleshooting, but can be helpful for understanding findings."]}),"\n",(0,i.jsx)(n.h2,{id:"logging-verbosity-options",children:"Logging verbosity options"}),"\n",(0,i.jsx)(n.p,{children:"Semgrep has three commonly used log levels."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Default: Prints scan progress, findings, and errors or warnings."}),"\n",(0,i.jsxs)(n.li,{children:["Verbose (",(0,i.jsx)(n.code,{children:"-v"})," or ",(0,i.jsx)(n.code,{children:"--verbose"}),"): Adds list of rules and other details such as skipped files."]}),"\n",(0,i.jsxs)(n.li,{children:["Debug (",(0,i.jsx)(n.code,{children:"--debug"}),"): Logs entire scan process at a very high level of detail."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The default level is useful for many common tasks such as identifying the scan in the Cloud Platform, checking which products were run, and seeing how many files were scanned with how many rules."}),"\n",(0,i.jsx)(n.p,{children:"Verbose logs are useful to determine which specific files were scanned and list all rules run. They provide the most useful detail when a particular file appears to be missed or it's not clear which rules are running in a scan."}),"\n",(0,i.jsx)(n.p,{children:"Debug logs are typically collected only if very detailed debugging is needed, such as if Semgrep crashes or is running very slowly. They're often very large."}),"\n",(0,i.jsxs)(n.p,{children:["Semgrep can also output only findings with its Quiet mode (",(0,i.jsx)(n.code,{children:"-q"}),"). This is not recommended when troubleshooting."]}),"\n",(0,i.jsx)(n.h2,{id:"additional-references",children:"Additional references"}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"/docs/kb/semgrep-code/semgrep-scan-troubleshooting",children:"Semgrep scan troubleshooting"})," for specific troubleshooting suggestions for scans."]})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var o=s(96540);const i={},r=o.createContext(i);function t(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);