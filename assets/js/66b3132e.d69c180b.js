"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[3105],{1509:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/dataflow-traces-mr-comments-c19261bac42d2f48d3c72eb095dbbe97.png"},10119:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[];function i(e){const n={a:"a",code:"code",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["For CI providers aside from ",e.name,", additional environment variables must be set:"]}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("br",{}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)("span",{children:[(0,t.jsx)("code",{children:(0,t.jsx)("a",{href:"/semgrep-ci/ci-environment-variables/#semgrep_pr_id",children:"SEMGREP_PR_ID"})})," is set to the ",e.comment_type,"  number of the pull request on ",e.name,"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/semgrep-ci/ci-environment-variables/#semgrep_repo_name",children:(0,t.jsx)(n.code,{children:"SEMGREP_REPO_NAME"})})," is set to the repository name."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/semgrep-ci/ci-environment-variables/#semgrep_repo_url",children:(0,t.jsx)(n.code,{children:"SEMGREP_REPO_URL"})})," is set to the repository URL where your project is viewable online."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["These values do not have to be fixed or hardcoded. They can be variables passed to the job. For more information, see ",(0,t.jsxs)(n.a,{href:"/semgrep-ci/sample-ci-configs",children:[(0,t.jsx)("i",{class:"fa-regular fa-file-lines"})," Sample CI configurations"]}),"."]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},11745:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[{value:"Get cross-file findings",id:"get-cross-file-findings",level:3}];function i(e){const n={a:"a",code:"code",em:"em",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["With ",(0,t.jsx)(n.strong,{children:"dataflow traces"}),", Semgrep Code can provide you with a visualization of\nthe path of tainted, or untrusted, data in specific findings. This path can help\nyou track the sources and sinks of the tainted data as they propagate through\nthe body of a function or a method. For general information about taint\nanalysis, see ",(0,t.jsx)(n.a,{href:"/writing-rules/data-flow/taint-mode",children:"Taint tracking"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["When running Semgrep Code from the command line, you can pass in the flag\n",(0,t.jsx)(n.code,{children:"--dataflow-traces"})," to use this feature."]}),"\n",(0,t.jsx)(n.p,{children:"You can view dataflow traces in:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Semgrep AppSec Platform by going to Semgrep Code's ",(0,t.jsx)(n.a,{href:"https://semgrep.dev/orgs/-/findings?tab=open",children:"Findings page"}),". For more details, see ",(0,t.jsx)(n.a,{href:"/semgrep-code/semgrep-pro-engine-data-flow",children:"Path of tainted data in Semgrep\nCode"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The PR or MR comments created by Semgrep Code running in your CI/CD system. To enable\nthis feature, see:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"GitHub users"}),": ",(0,t.jsx)(n.a,{href:"/semgrep-appsec-platform/github-pr-comments/#view-the-path-of-tainted-data-in-pr-comments",children:"Dataflow traces in PR\ncomments"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"GitLab users"}),": ",(0,t.jsx)(n.a,{href:"/semgrep-appsec-platform/gitlab-mr-comments/#view-the-path-of-tainted-data-in-mr-comments",children:"Dataflow traces in MR\ncomments"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"get-cross-file-findings",children:"Get cross-file findings"}),"\n",(0,t.jsxs)(n.p,{children:["To get cross-file (interfile) findings in your organization, follow the steps in ",(0,t.jsxs)(n.a,{href:"/semgrep-code/semgrep-pro-engine-intro",children:[(0,t.jsx)("i",{class:"fa-regular fa-file-lines"})," Perform cross-file analysis"]}),"."]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},25311:(e,n,s)=>{s.d(n,{Ay:()=>l,RM:()=>i});var t=s(74848),o=s(28453),r=s(81660);const i=[...r.RM,{value:"Test your configuration",id:"test-your-configuration",level:4}];function c(e){const n={a:"a",h4:"h4",p:"p",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Ay,{}),"\n",(0,t.jsx)(n.h4,{id:"test-your-configuration",children:"Test your configuration"}),"\n",(0,t.jsx)(n.p,{children:"Test that you are able to receive findings by manually triggering a scan through your CI provider."}),"\n",(0,t.jsxs)(n.p,{children:["Receiving PR or MR comments may require additional steps depending on the custom configuration of your VPN or SCM (for example, if you use a static IP without a hostname). Reach out to Semgrep support through the ",(0,t.jsx)(n.a,{href:"https://go.semgrep.dev/slack",children:"Semgrep Community Slack"})," or send an email to ",(0,t.jsx)(n.a,{href:"mailto:support@semgrep.com",children:"support@semgrep.com"})," for any concerns."]})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},27709:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/custom-comment-example-321bc2c6e1a23f0cb8046480bbc82007.png"},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>c});var t=s(96540);const o={},r=t.createContext(o);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(r.Provider,{value:n},e.children)}},28684:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[];function i(e){const n={a:"a",p:"p",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"To configure comments for Supply Chain, you must define a Supply Chain policy. This policy lets you set the specific conditions, such as transitivity and reachability, that trigger a comment. These conditions are unique to Supply Chain findings."}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"/semgrep-supply-chain/policies",children:"Policies documentation"})," for more information."]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},28934:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[];function i(e){const n={a:"a",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Type of scan"}),(0,t.jsx)(n.th,{children:"Product name"}),(0,t.jsx)(n.th,{children:"Trigger condition"}),(0,t.jsx)(n.th,{children:"How to set up"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Static application security testing (SAST)"}),(0,t.jsx)(n.td,{children:"Semgrep Code"}),(0,t.jsxs)(n.td,{children:["A comment appears when a finding is generated by a rule in ",(0,t.jsx)(n.strong,{children:"Comment or Block mode"}),". This means you can fully customize what comments your developers receive."]}),(0,t.jsxs)(n.td,{children:["Complete the steps in the following sections:",(0,t.jsxs)("ol",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)(n.a,{href:"#confirm-your-semgrep-accounts-connection",children:"Confirm your Semgrep account's connection and access to your source code manager"}),"."]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(n.a,{href:"#configure-comments-for-semgrep-code",children:"Configure comments for Semgrep Code"}),"."]})]})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Software composition analysis (SCA)"}),(0,t.jsx)(n.td,{children:"Semgrep Supply Chain (SSC)"}),(0,t.jsxs)(n.td,{children:["A comment appears based on the conditions you explicitly set in a ",(0,t.jsx)(n.a,{href:"/semgrep-supply-chain/policies",children:"Supply Chain policy"})," or when Semgrep detects a ",(0,t.jsx)(n.a,{href:"/semgrep-supply-chain/license-compliance",children:"license violation"}),"."]}),(0,t.jsxs)(n.td,{children:["To receive Supply Chain comments, complete the steps in ",(0,t.jsx)(n.a,{href:"#confirm-your-semgrep-accounts-connection",children:"Confirm account connection and access"})," and ",(0,t.jsx)(n.a,{href:"/semgrep-supply-chain/policies",children:"set up a policy"}),". ",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"To receive license violation comments, ",(0,t.jsx)(n.a,{href:"/semgrep-supply-chain/dependency-search#enable-and-use-dependency-search",children:"enable dependency search"}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Secrets"}),(0,t.jsx)(n.td,{children:"Semgrep Secrets"}),(0,t.jsxs)(n.td,{children:["A comment appears when a finding is generated by a rule in ",(0,t.jsx)(n.strong,{children:"Comment or Block mode"}),". A comment also appears for invalid findings and validation errors if these conditions are set to ",(0,t.jsx)(n.strong,{children:"Comment or Block mode"}),"."]}),(0,t.jsxs)(n.td,{children:["Complete the steps in the following sections:",(0,t.jsxs)("ol",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)(n.a,{href:"#confirm-your-semgrep-accounts-connection",children:"Confirm your Semgrep account's connection and access to your source code manager"}),"."]}),(0,t.jsxs)("li",{children:[(0,t.jsx)(n.a,{href:"#configure-comments-for-semgrep-secrets",children:"Configure comments for Semgrep Secrets"}),"."]})]})]})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Comments from Supply Chain scans include the following information:"}),"\n",(0,t.jsxs)("dl",{children:[(0,t.jsx)("dt",{children:"Risk"}),(0,t.jsx)("dd",{children:"A description of the vulnerability, including the types of attack it is vulnerable to."}),(0,t.jsx)("dt",{children:"Fix"}),(0,t.jsx)("dd",{children:"Indicates what versions to upgrade to, if any, that resolves or eliminates the vulnerability."}),(0,t.jsx)("dt",{children:"Reference"}),(0,t.jsxs)("dd",{children:["A link to additional information about the vulnerability from its source, such as the ",(0,t.jsx)("a",{href:"https://github.com/advisories",children:"GitHub Advisory Database"})," and the ",(0,t.jsx)("a",{href:"https://nvd.nist.gov/vuln",children:"National Vulnerability Database (NVD)"}),", if available."]})]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},32612:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[];function i(e){const n={a:"a",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"You've finished setting up a core deployment of Semgrep \ud83c\udf89."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Explore recommended tasks after deployment in ",(0,t.jsxs)(n.a,{href:"/deployment/beyond-core-deployment",children:[(0,t.jsx)("i",{class:"fa-regular fa-file-lines"})," Beyond core deployment"]}),"."]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},40462:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[{value:"Set rules to Comment or Block mode",id:"set-rules-to-comment-or-block-mode",level:4},{value:"Validation state policies",id:"validation-state-policies",level:4}];function i(e){const n={admonition:"admonition",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:(0,t.jsxs)(n.p,{children:["In addition to setting up the connection between Semgrep and ",e.name,", you\nmust assign rules to Comment or Block mode. This customization enables you to:"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Manage the amount of ",e.comment_type," comments your\ndevelopers receive."]}),"\n",(0,t.jsx)(n.li,{children:"Ensure that only rules that meet your criteria, such as high severity or high confidence rules, and result in findings involving valid secrets produce comments visible to developers, reducing noise."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"set-rules-to-comment-or-block-mode",children:"Set rules to Comment or Block mode"}),"\n",(0,t.jsx)(n.p,{children:"The following instructions let you customize what findings or security issues your developers see as comments in their PRs:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In Semgrep AppSec Platform, go to ",(0,t.jsx)(n.strong,{children:"Rules > Policies > Secrets"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Under ",(0,t.jsxs)(n.strong,{children:["Modes ",(0,t.jsx)("i",{class:"fa-solid fa-gear"})]}),", you can see if you have existing rules in either Comment or Block mode. You can also use the filters to find rules you want to set to Comment or Block."]}),"\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsxs)(n.strong,{children:[(0,t.jsx)("i",{class:"fa-solid fa-square-check"})," checkbox"]})," of the rules you want to set. You can use ",(0,t.jsx)("kbd",{children:"Ctrl + Click"})," to select rules in bulk."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Change modes"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Click either ",(0,t.jsx)(n.strong,{children:"Block"})," or ",(0,t.jsx)(n.strong,{children:"Comment"}),"."]}),"\n"]}),"\n",(0,t.jsx)("span",{children:(0,t.jsxs)(n.p,{children:["You have successfully configured ",e.comment_type," comments for Semgrep\nSecrets."]})}),"\n",(0,t.jsx)(n.h4,{id:"validation-state-policies",children:"Validation state policies"}),"\n",(0,t.jsx)(n.p,{children:"Validation state policies allow you to define how Semgrep handles the following issues:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Invalid findings"}),": the secret has been revoked, was never functional, or used for a custom or private endpoint that Semgrep can't communicate with. For example, a Semgrep rule that tests GitHub credentials may return an invalid finding if Semgrep can't communicate with an on-premise deployment."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validation errors"}),": Semgrep was unable to reach the secrets provider to test the validity of the credential, or Semgrep received an unexpected response from the API"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"To edit the policy for invalid secrets and errors:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In Semgrep AppSec Platform, go to ",(0,t.jsx)(n.strong,{children:"Rules > Policies > Secrets"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Validation State Policies"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Choose the mode, either Comment or Block, that you want Semgrep to set for ",(0,t.jsx)(n.strong,{children:"Invalid findings"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Choose the mode, either Comment or Block, that you want Semgrep to set for ",(0,t.jsx)(n.strong,{children:"Validation errors"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)("span",{children:(0,t.jsxs)(n.p,{children:["Rules in ",(0,t.jsx)("strong",{children:"Block mode"})," fail the CI job that runs on the"," ","\n",e.comment_type,". Depending on your workflow, this may prevent your"," ","\n",e.comment_type," from merging."]})})})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},47136:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[];function i(e){const n={a:"a",admonition:"admonition",li:"li",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsx)(n.admonition,{title:"Your deployment journey",type:"note",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["You have gained the necessary ",(0,t.jsx)(n.a,{href:"/deployment/checklist",children:"resource access and permissions"})," required for deployment."]}),"\n",(0,t.jsxs)(n.li,{children:["You have ",(0,t.jsx)(n.a,{href:"/deployment/create-account-and-orgs",children:"created a Semgrep account and organization"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["You have ",(0,t.jsx)(n.a,{href:"/deployment/connect-scm",children:"connected your source code manager"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Optionally, you have ",(0,t.jsx)(n.a,{href:"/deployment/sso",children:"set up SSO"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["You have successfully added a ",(0,t.jsx)(n.a,{href:"/deployment/add-semgrep-to-ci",children:"Semgrep job"})," to your CI workflow with ",(0,t.jsx)(n.a,{href:"/deployment/customize-ci-jobs/#set-up-diff-aware-scans",children:"diff-aware scanning"}),"."]}),"\n"]})})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},50044:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/custom-comments-configuration-0d412b3a937594106e9835084964667b.png"},68021:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[];function i(e){const n={a:"a",li:"li",ol:"ol",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"To enable autofix for all projects in your Semgrep AppSec Platform organization, follow these steps:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In Semgrep AppSec Platform, go to ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://semgrep.dev/orgs/-/settings/general/code",children:"Settings > General > Code"})}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"Autofix"})," ",(0,t.jsx)("i",{class:"fa-solid fa-toggle-large-on"})," toggle to enable this feature."]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},72252:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[{value:"Set rules to Comment or Block mode",id:"set-rules-to-comment-or-block-mode",level:4}];function i(e){const n={admonition:"admonition",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:(0,t.jsxs)(n.p,{children:["In addition to setting up the connection between Semgrep and ",e.name,", you\nmust assign rules to Comment or Block mode. This customization enables you to:"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Manage the ",(0,t.jsxs)("strong",{children:["amount of ",e.comment_type," comments"]})," your\ndevelopers receive."]}),"\n",(0,t.jsx)(n.li,{children:"Ensure that only rules that meet your criteria, such as high severity or high confidence rules, produce comments visible to developers, reducing noise."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"set-rules-to-comment-or-block-mode",children:"Set rules to Comment or Block mode"}),"\n",(0,t.jsx)(n.p,{children:"The following instructions let you customize what findings or security issues your developers see as comments in their PRs:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In your Semgrep AppSec Platform account, click ",(0,t.jsx)(n.strong,{children:"Rules > Policies"})," to enter the ",(0,t.jsx)(n.strong,{children:"Policies"})," page. Under ",(0,t.jsxs)(n.strong,{children:["Modes ",(0,t.jsx)("i",{class:"fa-solid fa-gear"})]}),", you can quickly see if you have existing rules in either Comment or Block mode."]}),"\n",(0,t.jsxs)(n.li,{children:["Optional: To configure Semgrep Secrets rules, click the ",(0,t.jsx)(n.strong,{children:"Secrets"})," tab."]}),"\n",(0,t.jsx)(n.li,{children:"Optional: Use the filters to quickly find rules to set to Comment or Block."}),"\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsxs)(n.strong,{children:[(0,t.jsx)("i",{class:"fa-solid fa-square-check"})," checkbox"]})," of the rules you want to set. You can use ",(0,t.jsx)("kbd",{children:"Ctrl + Click"})," to select rules in bulk."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Change modes"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Click either ",(0,t.jsx)(n.strong,{children:"Block"})," or ",(0,t.jsx)(n.strong,{children:"Comment"}),"."]}),"\n"]}),"\n",(0,t.jsx)("span",{children:(0,t.jsxs)(n.p,{children:["You have successfully configured ",e.comment_type," comments for Semgrep\nCode."]})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)("span",{children:(0,t.jsxs)(n.p,{children:["Rules in ",(0,t.jsx)("strong",{children:"Block mode"})," fail the CI job that runs on the"," ","\n",e.comment_type,". Depending on your workflow, this may prevent your"," ","\n",e.comment_type," from merging."]})})})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},81508:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[];function i(e){const n={a:"a",li:"li",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.a,{href:"/kb/semgrep-appsec-platform/missing-pr-comments",children:[(0,t.jsx)("i",{class:"fa-regular fa-file-lines"})," Why am I not receiving PR or MR comments?"]})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.a,{href:"/kb/semgrep-appsec-platform/inline-pr-comments",children:[(0,t.jsx)("i",{class:"fa-regular fa-file-lines"})," Why did the comments on a PR or MR not appear inline?"]})}),"\n"]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},81660:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[{value:"Additional egress IP addresses",id:"additional-egress-ip-addresses",level:4}];function i(e){const n={a:"a",code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["If you are behind a firewall, are using a virtual private network (VPN), or have network restrictions regarding access, you may need to add the following IP addresses to the ",(0,t.jsx)(n.strong,{children:"ingress"})," allowlist and ",(0,t.jsx)(n.strong,{children:"egress"})," allowlist:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Ingress IP addresses (from Semgrep to your infrastructure)\n# and egress IP addresses (from your infrastructure to Semgrep)\n35.166.231.235\n52.35.248.246\n52.34.137.110\n44.225.64.41\n"})}),"\n",(0,t.jsx)(n.h4,{id:"additional-egress-ip-addresses",children:"Additional egress IP addresses"}),"\n",(0,t.jsxs)(n.p,{children:["You must also add ",(0,t.jsx)(n.strong,{children:"CloudFront IP addresses"})," to your ",(0,t.jsx)(n.strong,{children:"egress"})," allowlist. Refer to ",(0,t.jsxs)(n.a,{href:"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/LocationsOfEdgeServers.html",children:[(0,t.jsx)("i",{class:"fas fa-external-link fa-xs"})," Locations and IP address ranges of CloudFront edge servers"]})," for a list of IP addresses."]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},87624:(e,n,s)=>{s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),o=s(28453);const r=[];function i(e){const n={a:"a",em:"em",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["You can customize the comments Semgrep leaves on your ",e.comment_type,". Custom comments allow you to direct your teams to the resources they need to handle the vulnerabilities Semgrep identifies in their code."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"A custom comment with instructions on how to obtain more information about a finding.",src:s(27709).A+"#md-width",width:"1591",height:"887"}),"\n",(0,t.jsxs)(n.em,{children:[(0,t.jsx)(n.strong,{children:"Figure"}),". A custom comment with instructions on how to obtain more information about a finding."]})]}),"\n",(0,t.jsxs)(n.p,{children:["To provide custom ",e.comment_type," comments:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Sign in to ",(0,t.jsxs)(n.a,{href:"https://semgrep.dev/login?",children:[(0,t.jsx)("i",{class:"fas fa-external-link fa-xs"})," Semgrep AppSec Platform"]}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Navigate to ",(0,t.jsx)(n.strong,{children:"Settings > General > Global"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Go to the ",(0,t.jsx)(n.strong,{children:"Custom PR/MR comments footers"})," section.\n",(0,t.jsx)(n.img,{alt:"Custom comment configuration in Semgrep AppSec Platform",src:s(50044).A+"#md-width",width:"1900",height:"1403"}),"\n",(0,t.jsxs)(n.em,{children:[(0,t.jsx)(n.strong,{children:"Figure"}),". Custom comment configuration in Semgrep AppSec Platform."]})]}),"\n",(0,t.jsxs)(n.li,{children:["Provide a custom comment for each Semgrep product whose findings you want to generate a PR comment. Semgrep supports ",e.link_type," links in your message."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Save changes"}),"."]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},87742:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/gl-mr-comment-bec9b6b30d58b50dbc385a6958ee6385.png"},92646:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>y,contentTitle:()=>j,default:()=>S,frontMatter:()=>x,metadata:()=>t,toc:()=>v});const t=JSON.parse('{"id":"semgrep-appsec-platform/gitlab-mr-comments","title":"GitLab MR comments","description":"Enable merge request (MR) comments in your GitLab repositories to display Semgrep findings to developers.","source":"@site/docs/semgrep-appsec-platform/gitlab-mr-comments.md","sourceDirName":"semgrep-appsec-platform","slug":"/semgrep-appsec-platform/gitlab-mr-comments","permalink":"/semgrep-docs/semgrep-appsec-platform/gitlab-mr-comments","draft":false,"unlisted":false,"editUrl":"https://github.com/kyle-semgrep/semgrep-docs/edit/main/docs/semgrep-appsec-platform/gitlab-mr-comments.md","tags":[{"inline":true,"label":"Deployment","permalink":"/semgrep-docs/tags/deployment"},{"inline":true,"label":"Semgrep AppSec Platform","permalink":"/semgrep-docs/tags/semgrep-app-sec-platform"}],"version":"current","lastUpdatedAt":1753220396000,"frontMatter":{"slug":"gitlab-mr-comments","append_help_link":true,"title":"GitLab MR comments","hide_title":true,"toc_max_heading_level":4,"description":"Enable merge request (MR) comments in your GitLab repositories to display Semgrep findings to developers.","tags":["Deployment","Semgrep AppSec Platform"]},"sidebar":"scanSidebar","previous":{"title":"GitHub PR comments","permalink":"/semgrep-docs/semgrep-appsec-platform/github-pr-comments"},"next":{"title":"Bitbucket PR comments","permalink":"/semgrep-docs/category/bitbucket-pr-comments"}}');var o=s(74848),r=s(28453),i=s(87624),c=s(68021),l=s(11745),a=s(28934),d=s(81508),m=s(72252),h=s(40462),p=(s(10119),s(47136)),u=s(25311),g=s(32612),f=s(28684);const x={slug:"gitlab-mr-comments",append_help_link:!0,title:"GitLab MR comments",hide_title:!0,toc_max_heading_level:4,description:"Enable merge request (MR) comments in your GitLab repositories to display Semgrep findings to developers.",tags:["Deployment","Semgrep AppSec Platform"]},j="Set up GitLab merge request comments",y={},v=[...p.RM,{value:"Conditions for MR comment creation",id:"conditions-for-mr-comment-creation",level:2},...a.RM,{value:"Steps to set up MR comments",id:"steps-to-set-up-mr-comments",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Connect your GitLab organization to Semgrep AppSec Platform",id:"connect-your-gitlab-organization-to-semgrep-appsec-platform",level:3},{value:"Configure comments for Semgrep Code",id:"configure-comments-for-semgrep-code",level:3},...m.RM,{value:"Configure comments for Semgrep Secrets",id:"configure-comments-for-semgrep-secrets",level:3},...h.RM,{value:"Configure comments for Semgrep Supply Chain",id:"configure-comments-for-semgrep-supply-chain",level:3},...f.RM,{value:"Receive comments in your VPN or on-premise SCM",id:"receive-comments-in-your-vpn-or-on-premise-scm",level:3},...u.RM,{value:"Optional features",id:"optional-features",level:2},{value:"Enable autofix in GitLab repositories",id:"enable-autofix-in-gitlab-repositories",level:3},...c.RM,{value:"Dataflow traces in MR comments",id:"dataflow-traces-in-mr-comments",level:3},...l.RM,{value:"View the path of tainted data in MR comments",id:"view-the-path-of-tainted-data-in-mr-comments",level:4},{value:"Customize MR comments",id:"customize-mr-comments",level:3},...i.RM,{value:"Next steps",id:"next-steps",level:2},...g.RM,{value:"Additional references",id:"additional-references",level:2},...d.RM];function b(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"set-up-gitlab-merge-request-comments",children:"Set up GitLab merge request comments"})}),"\n",(0,o.jsx)(p.Ay,{}),"\n",(0,o.jsxs)(n.p,{children:["Semgrep can create ",(0,o.jsx)(n.strong,{children:"merge request (MR) comments"})," in your GitLab repository. These comments provide a description of the issue detected by Semgrep and may offer possible solutions. These comments are a means for security teams, or any team responsible for creating standards to help their fellow developers write safe and standards-compliant code."]}),"\n",(0,o.jsx)(n.p,{children:"Automated comments on GitLab merge requests are displayed as follows:"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.img,{alt:"Semgrep GitLab MR comment",src:s(87742).A+"#md-width",width:"1826",height:"1006"}),"\n",(0,o.jsx)(n.strong,{children:"Figure"})," An inline GitLab merge request comment."]}),"\n",(0,o.jsx)(n.h2,{id:"conditions-for-mr-comment-creation",children:"Conditions for MR comment creation"}),"\n",(0,o.jsx)(n.p,{children:"MR comments appear for the following types of scans under these conditions:"}),"\n",(0,o.jsx)(a.Ay,{comment_type:"MR"}),"\n",(0,o.jsx)(n.h2,{id:"steps-to-set-up-mr-comments",children:"Steps to set up MR comments"}),"\n",(0,o.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(n.p,{children:["In addition to finishing the previous steps in your deployment journey, it is recommended to have completed a ",(0,o.jsx)(n.strong,{children:"full scan"})," on your ",(0,o.jsx)(n.strong,{children:"default branch"})," for the repository in which you want to receive comments."]}),"\n",(0,o.jsx)(n.h3,{id:"connect-your-gitlab-organization-to-semgrep-appsec-platform",children:"Connect your GitLab organization to Semgrep AppSec Platform"}),"\n",(0,o.jsx)(n.p,{children:"To enable MR comments, connect your GitLab organization to Semgrep AppSec Platform:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Sign in to ",(0,o.jsxs)(n.a,{href:"https://semgrep.dev/login?return_path=/manage/projects",children:[(0,o.jsx)("i",{class:"fas fa-external-link fa-xs"})," Semgrep AppSec Platform"]}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Go to ",(0,o.jsx)(n.strong,{children:"Settings > Source code managers"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Click ",(0,o.jsx)(n.strong,{children:"Add connection"})," and select ",(0,o.jsx)(n.strong,{children:"GitLab"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Create a GitLab personal access token (PAT) with ",(0,o.jsx)(n.code,{children:"api"})," scope:","\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Log in to your GitLab account, and go to ",(0,o.jsxs)(n.a,{href:"https://gitlab.com/-/profile/personal_access_tokens",children:[(0,o.jsx)("i",{class:"fas fa-external-link fa-xs"})," Profile > Access Tokens"]}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Add a token with ",(0,o.jsx)(n.code,{children:"api"})," scope."]}),"\n",(0,o.jsx)(n.li,{children:"Copy the generated token."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Return to Semgrep AppSec Platform, and in the ",(0,o.jsx)(n.strong,{children:"Add connection"})," form:","\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Enter the ",(0,o.jsx)(n.strong,{children:"Name of your GitHub Organization"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Paste the PAT you created in ",(0,o.jsx)(n.strong,{children:"Access token"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Click ",(0,o.jsx)(n.strong,{children:"Connect"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Once connected, Semgrep automatically posts comments to your merge requests without any additional CI/CD configuration."}),"\n",(0,o.jsx)(n.h3,{id:"configure-comments-for-semgrep-code",children:"Configure comments for Semgrep Code"}),"\n",(0,o.jsx)(m.Ay,{name:"GitLab",comment_type:"MR"}),"\n",(0,o.jsx)(n.h3,{id:"configure-comments-for-semgrep-secrets",children:"Configure comments for Semgrep Secrets"}),"\n",(0,o.jsx)(h.Ay,{name:"GitLab",comment_type:"MR"}),"\n",(0,o.jsx)(n.h3,{id:"configure-comments-for-semgrep-supply-chain",children:"Configure comments for Semgrep Supply Chain"}),"\n",(0,o.jsx)(f.Ay,{}),"\n",(0,o.jsx)(n.h3,{id:"receive-comments-in-your-vpn-or-on-premise-scm",children:"Receive comments in your VPN or on-premise SCM"}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Ensure that you've ",(0,o.jsx)(n.a,{href:"/semgrep-appsec-platform/gitlab-mr-comments#mr-comments-with-multiple-gitlab-groups",children:"onboarded all of your GitLab groups"})," to Semgrep."]})}),"\n",(0,o.jsx)(u.Ay,{}),"\n",(0,o.jsxs)(n.p,{children:["You've set up MR comments! Enable optional features provided in the following sections, or see ",(0,o.jsx)(n.a,{href:"#next-steps",children:"Next steps"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"optional-features",children:"Optional features"}),"\n",(0,o.jsx)(n.h3,{id:"enable-autofix-in-gitlab-repositories",children:"Enable autofix in GitLab repositories"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"/writing-rules/autofix",children:"Autofix"})," is a Semgrep feature in which rules contain suggested fixes to resolve findings."]}),"\n",(0,o.jsx)(c.Ay,{}),"\n",(0,o.jsx)(n.h3,{id:"dataflow-traces-in-mr-comments",children:"Dataflow traces in MR comments"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.img,{alt:"Screenshot of a GitLab MR comment with dataflow traces",src:s(1509).A+"",width:"907",height:"509"}),"\n",(0,o.jsxs)(n.em,{children:[(0,o.jsx)(n.strong,{children:"Figure"}),". An inline GitLab pull request comment with dataflow traces."]})]}),"\n",(0,o.jsx)(l.Ay,{}),"\n",(0,o.jsx)(n.h4,{id:"view-the-path-of-tainted-data-in-mr-comments",children:"View the path of tainted data in MR comments"}),"\n",(0,o.jsx)(n.p,{children:"To enable dataflow traces in your CI pipeline, fulfill the following prerequisites:"}),"\n",(0,o.jsx)(n.admonition,{title:"Prerequisites",type:"info",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Set up Semgrep to post GitLab merge request comments, as described on this page."}),"\n",(0,o.jsxs)(n.li,{children:["To obtain meaningful results of dataflow traces in MR comments, use cross-file analysis while scanning your repositories. To enable cross-file analysis, see ",(0,o.jsxs)(n.a,{href:"/semgrep-code/semgrep-pro-engine-intro",children:[(0,o.jsx)("i",{class:"fa-regular fa-file-lines"})," Perform cross-file analysis"]}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Not all Semgrep rules or rulesets make use of taint tracking. Ensure that you have a ruleset, such as the ",(0,o.jsx)(n.strong,{children:"default ruleset"})," added in your ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.a,{href:"https://semgrep.dev/orgs/-/policies",children:"Policies"})}),". If this ruleset is not added, go to ",(0,o.jsx)(n.a,{href:"https://semgrep.dev/p/default",children:"https://semgrep.dev/p/default"}),", and then click ",(0,o.jsx)(n.strong,{children:"Add to Policy"}),". You can add rules that use taint tracking from ",(0,o.jsx)(n.a,{href:"https://semgrep.dev/explore",children:"Semgrep Registry"}),"."]}),"\n"]})}),"\n",(0,o.jsx)(n.h3,{id:"customize-mr-comments",children:"Customize MR comments"}),"\n",(0,o.jsx)(i.Ay,{comment_type:"MR",link_type:"HTML, Markdown, and plaintext"}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,o.jsx)(g.Ay,{}),"\n",(0,o.jsx)(n.h2,{id:"additional-references",children:"Additional references"}),"\n",(0,o.jsx)(d.Ay,{})]})}function S(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(b,{...e})}):b(e)}}}]);