"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[84696],{21486:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"kb/semgrep-ci/github-upload-findings-in-security-dashboard","title":"Why aren\'t findings populating in the GitHub Advanced Security Dashboard after running Semgrep in CI?","description":"To prevent \\"resource not accessible by integration\\" error when running job to upload findings to GitHub\'s Advanced Security Dashboard","source":"@site/docs/kb/semgrep-ci/github-upload-findings-in-security-dashboard.md","sourceDirName":"kb/semgrep-ci","slug":"/kb/semgrep-ci/github-upload-findings-in-security-dashboard","permalink":"/docs/kb/semgrep-ci/github-upload-findings-in-security-dashboard","draft":false,"unlisted":false,"editUrl":"https://github.com/kyle-semgrep/semgrep-docs/edit/main?base=kyle-semgrep:main/docs/kb/semgrep-ci/github-upload-findings-in-security-dashboard.md","tags":[{"inline":true,"label":"Semgrep in CI","permalink":"/docs/tags/semgrep-in-ci"},{"inline":true,"label":"GitHub","permalink":"/docs/tags/git-hub"}],"version":"current","lastUpdatedAt":1752253235000,"frontMatter":{"description":"To prevent \\"resource not accessible by integration\\" error when running job to upload findings to GitHub\'s Advanced Security Dashboard","tags":["Semgrep in CI","GitHub"]},"sidebar":"kbSidebar","previous":{"title":"Set up reusable GitHub workflows for Semgrep scans","permalink":"/docs/kb/semgrep-ci/github-reusable-workflows-semgrep"},"next":{"title":"Full and diff-aware scans with GitHub and Jenkins","permalink":"/docs/kb/semgrep-ci/jenkins-diff-scans"}}');var r=n(74848),o=n(28453);const t={description:'To prevent "resource not accessible by integration" error when running job to upload findings to GitHub\'s Advanced Security Dashboard',tags:["Semgrep in CI","GitHub"]},a="Why aren't findings populating in the GitHub Advanced Security Dashboard after running Semgrep in CI?",d={},c=[{value:"Your repository&#39;s workflow permissions are set to read-only",id:"your-repositorys-workflow-permissions-are-set-to-read-only",level:2},{value:"The workflow or job does not have the correct permissions in a private repository",id:"the-workflow-or-job-does-not-have-the-correct-permissions-in-a-private-repository",level:2},{value:"Example job configuration with <code>permissions</code> key",id:"example-job-configuration-with-permissions-key",level:3}];function l(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"why-arent-findings-populating-in-the-github-advanced-security-dashboard-after-running-semgrep-in-ci",children:"Why aren't findings populating in the GitHub Advanced Security Dashboard after running Semgrep in CI?"})}),"\n",(0,r.jsxs)(i.p,{children:["When scanning with Semgrep in CI, findings automatically populate in Semgrep AppSec Platform. To show findings in the GitHub Advanced Security Dashboard, run an alternate job that uploads findings to the dashboard in the form of a ",(0,r.jsx)(i.code,{children:"SARIF"})," file. See ",(0,r.jsx)(i.a,{href:"https://semgrep.dev/docs/semgrep-ci/sample-ci-configs/#sample-github-actions-configuration-file",children:"Sample GitHub Actions configuration file"})," for an example."]}),"\n",(0,r.jsx)(i.p,{children:'If you run the alternate job and it fails with a "resource not accessible by integration" error, there are two possible causes.'}),"\n",(0,r.jsx)(i.h2,{id:"your-repositorys-workflow-permissions-are-set-to-read-only",children:"Your repository's workflow permissions are set to read-only"}),"\n",(0,r.jsxs)(i.p,{children:["Repository-level workflow permissions are set to ",(0,r.jsx)(i.code,{children:"read-only"})," (default) unless they've previously been changed. Use of the ",(0,r.jsx)(i.code,{children:"permissions"})," key within the workflow file does not override this setting."]}),"\n",(0,r.jsx)(i.p,{children:"To update this setting:"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Navigate to your organization or repository in GitHub."}),"\n",(0,r.jsxs)(i.li,{children:["Click ",(0,r.jsx)(i.strong,{children:"Settings > Actions > General > Workflow permissions"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.img,{alt:"image info",src:n(23057).A+"",width:"1618",height:"394"}),"\nTarget permissions"]}),"\n",(0,r.jsxs)(i.admonition,{type:"info",children:[(0,r.jsx)(i.mdxAdmonitionTitle,{}),(0,r.jsxs)(i.p,{children:["Changing the repository's default workflow permissions changes the permissions for all workflows in that repository. Use of the ",(0,r.jsx)(i.code,{children:"permissions"})," key will not override this setting, so updating it is a required step. Learn more about the ",(0,r.jsx)(i.code,{children:"permissions"})," key at ",(0,r.jsx)(i.a,{href:"https://docs.github.com/en/actions/using-jobs/assigning-permissions-to-jobs#setting-the-github_token-permissions-for-all-jobs-in-a-workflow",children:"Assigning permissions to jobs"}),", or review the example workflow-level permissions below."]})]}),"\n",(0,r.jsx)(i.h2,{id:"the-workflow-or-job-does-not-have-the-correct-permissions-in-a-private-repository",children:"The workflow or job does not have the correct permissions in a private repository"}),"\n",(0,r.jsxs)(i.p,{children:["In order for Semgrep findings in a private repository to appear on the GitHub Advanced Security Dashboard, you must ensure that the appropriate permissions are configured at the workflow level using the ",(0,r.jsx)(i.code,{children:"permissions"})," key. See the following example."]}),"\n",(0,r.jsxs)(i.h3,{id:"example-job-configuration-with-permissions-key",children:["Example job configuration with ",(0,r.jsx)(i.code,{children:"permissions"})," key"]}),"\n",(0,r.jsxs)(i.p,{children:["This job only requires ",(0,r.jsx)(i.code,{children:"write"})," permissions for ",(0,r.jsx)(i.code,{children:"security-events"}),"."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-yml",children:"# Name of this GitHub Actions workflow.\nname: Semgrep\n\non:\n  pull_request: {}\n  workflow_dispatch: {}\n  push:\n    branches: [\"master\", \"main\"]\n  schedule:\n    - cron: '20 17 * * *' # Sets Semgrep to scan every day at 17:20 UTC.\n\njobs:\n  semgrep:\n    name: semgrep/ci \n    runs-on: ubuntu-latest\n\n    container:\n      # A Docker image with Semgrep installed. Do not change this.\n      image: semgrep/semgrep\n\n    if: (github.actor != 'dependabot[bot]')\n    permissions:\n      # required for all workflows\n      security-events: write\n      # for workflows in private repos\n      actions: read\n      contents: read\n    steps:\n      - uses: actions/checkout@v4\n      - run: semgrep ci --sarif > semgrep.sarif\n        env:\n          SEMGREP_APP_TOKEN: ${{ secrets.SEMGREP_APP_TOKEN }}\n      - name: Upload SARIF file for GitHub Advanced Security Dashboard\n        uses: github/codeql-action/upload-sarif@v2\n        with:\n          sarif_file: semgrep.sarif\n        if: always()\n"})})]})}function p(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},23057:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/github-default-workflow-permissions-9dfbabb7731b2d0f2b2760c0f455a90f.png"},28453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>a});var s=n(96540);const r={},o=s.createContext(r);function t(e){const i=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(o.Provider,{value:i},e.children)}}}]);