"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[16276],{2286:(e,s,n)=>{n.d(s,{Ay:()=>c,RM:()=>t});var r=n(74848),i=n(28453);const t=[];function o(e){const s={code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Log in to your Semgrep account. Running this command launches a browser window, but you can also use the link that's returned in the CLI to proceed:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-console",children:"semgrep login\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["In the ",(0,r.jsx)(s.strong,{children:"Semgrep CLI login"}),", click ",(0,r.jsx)(s.strong,{children:"Activate"})," to proceed."]}),"\n"]}),"\n"]})}function c(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},22749:(e,s,n)=>{n.d(s,{Ay:()=>c,RM:()=>t});var r=n(74848),i=n(28453);const t=[];function o(e){const s={a:"a",code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Homebrew users:"})," Ensure that you've ",(0,r.jsx)(s.a,{href:"https://docs.brew.sh/FAQ#my-mac-apps-dont-find-homebrew-utilities",children:"added Homebrew to your PATH"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"WSL users"}),": Ensure that you have the ",(0,r.jsx)(s.a,{href:"https://learn.microsoft.com/en-us/windows/wsl/install",children:"Windows Subsystem for Linux installed"})," before proceeding."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Install the Semgrep CLI tool and confirm the installation:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-console",children:'# macOS users only\nbrew install semgrep\n\n# macOS, Linux, or Windows Subsystem for Linux (WSL) users\npython3 -m pip install semgrep\n\n# if you get the following error "error: externally-managed-environment",\n# see semgrep.dev/docs/kb/semgrep-appsec-platform/error-externally-managed-environment \n\n# confirm\nsemgrep --version\n'})})]})}function c(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>c});var r=n(96540);const i={},t=r.createContext(i);function o(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:s},e.children)}},79858:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"getting-started/cli","title":"Local CLI scans","description":"Learn how to set up Semgrep, scan your first project for security issues, and view your findings in the CLI.","source":"@site/docs/getting-started/cli.md","sourceDirName":"getting-started","slug":"/getting-started/cli","permalink":"/semgrep-docs/getting-started/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/kyle-semgrep/semgrep-docs/edit/main/docs/getting-started/cli.md","tags":[{"inline":true,"label":"quickstart","permalink":"/semgrep-docs/tags/quickstart"}],"version":"current","lastUpdatedAt":1752262761000,"frontMatter":{"slug":"cli","title":"Local CLI scans","hide_title":true,"description":"Learn how to set up Semgrep, scan your first project for security issues, and view your findings in the CLI.","tags":["quickstart"]},"sidebar":"scanSidebar","previous":{"title":"Local and CLI scans","permalink":"/semgrep-docs/category/local-and-cli-scans"},"next":{"title":"Run rules","permalink":"/semgrep-docs/running-rules"}}');var i=n(74848),t=n(28453),o=n(22749),c=n(2286);const l={slug:"cli",title:"Local CLI scans",hide_title:!0,description:"Learn how to set up Semgrep, scan your first project for security issues, and view your findings in the CLI.",tags:["quickstart"]},a="Local scans with Semgrep",d={},h=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Set up Semgrep",id:"set-up-semgrep",level:2},...o.RM,{value:"Log in to your Semgrep account",id:"log-in-to-your-semgrep-account",level:2},...c.RM,{value:"Enable cross-file analysis",id:"enable-cross-file-analysis",level:2},{value:"Scan your project",id:"scan-your-project",level:2},{value:"Test custom rules",id:"test-custom-rules",level:2},{value:"Publish custom rules",id:"publish-custom-rules",level:3},{value:"Scan without sending results to Semgrep",id:"scan-without-sending-results-to-semgrep",level:2},{value:"Scan using Semgrep CE analysis (single-function)",id:"scan-using-semgrep-ce-analysis-single-function",level:2},{value:"Scan using specific Semgrep products",id:"scan-using-specific-semgrep-products",level:2},{value:"Extend timeout thresholds",id:"extend-timeout-thresholds",level:2},{value:"Improve performance for large codebases",id:"improve-performance-for-large-codebases",level:2},{value:"Set log levels",id:"set-log-levels",level:2},{value:"Example usage",id:"example-usage",level:3},{value:"Exit codes",id:"exit-codes",level:2},{value:"Log out",id:"log-out",level:2}];function u(e){const s={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"local-scans-with-semgrep",children:"Local scans with Semgrep"})}),"\n",(0,i.jsx)(s.p,{children:"Learn how to set up Semgrep, scan your project for security issues using Semgrep Code's interfile analysis, and view your findings in the CLI."}),"\n",(0,i.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(s.p,{children:["Before proceeding, see ",(0,i.jsx)(s.a,{href:"/prerequisites",children:"Prerequisites"})," to ensure that your machine meets Semgrep's requirements."]}),"\n",(0,i.jsx)(s.h2,{id:"set-up-semgrep",children:"Set up Semgrep"}),"\n",(0,i.jsx)(o.Ay,{}),"\n",(0,i.jsx)(s.h2,{id:"log-in-to-your-semgrep-account",children:"Log in to your Semgrep account"}),"\n",(0,i.jsx)(c.Ay,{}),"\n",(0,i.jsx)(s.admonition,{type:"warning",children:(0,i.jsxs)(s.p,{children:["Semgrep scans triggered using ",(0,i.jsx)(s.code,{children:"semgrep ci"})," fail if you aren't signed in to your Semgrep account."]})}),"\n",(0,i.jsx)(s.h2,{id:"enable-cross-file-analysis",children:"Enable cross-file analysis"}),"\n",(0,i.jsxs)(s.p,{children:["To enable ",(0,i.jsx)(s.a,{href:"/semgrep-code/semgrep-pro-engine-intro",children:"cross-file analysis"}),", which allows you to detect vulnerabilities across files and folders:"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://semgrep.dev/login",children:"Sign in to Semgrep AppSec Platform"})," if you haven't already."]}),"\n",(0,i.jsxs)(s.li,{children:["Navigate to ",(0,i.jsx)(s.a,{href:"https://semgrep.dev/orgs/-/settings/general/code",children:"Settings > General > Code"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["Click the ",(0,i.jsx)(s.strong,{children:"Cross-file analysis"})," ",(0,i.jsx)("i",{class:"fa-solid fa-toggle-large-on"})," toggle to enable cross-file analysis."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"scan-your-project",children:"Scan your project"}),"\n",(0,i.jsx)(s.p,{children:"Semgrep provides two commands that you can use to start a scan from the CLI:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"semgrep scan"})," - This is the recommended command for ",(0,i.jsx)(s.a,{href:"/getting-started/cli-oss",children:"scanning local codebases or scanning a project when you don't have a Semgrep account"}),". It is also recommended for ",(0,i.jsx)(s.a,{href:"/writing-rules/testing-rules",children:"writing and testing custom rules"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"semgrep ci"})," - This is the recommended command if you are scanning Git repositories with Semgrep as part of an organization with custom rules and policies. ",(0,i.jsx)(s.code,{children:"semgrep ci"})," fetches your organization's scan configurations from Semgrep AppSec Platform."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Navigate to the root of your codebase, and run your first scan. The specific command you use depends on how you want to view the results."}),"\n",(0,i.jsx)(s.p,{children:"To view the results in the CLI:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"semgrep ci\n"})}),"\n",(0,i.jsx)(s.p,{children:"To export the results to a plain text file:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"semgrep ci --text --text-output=semgrep.txt\n"})}),"\n",(0,i.jsx)(s.p,{children:"To export the results to a SARIF file:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"semgrep ci --sarif --sarif-output=semgrep.sarif\n"})}),"\n",(0,i.jsx)(s.p,{children:"To export the results to a JSON file:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"semgrep ci --json --json-output=semgrep.json\n"})}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["The JSON schema for Semgrep's CLI output can be found in ",(0,i.jsx)(s.a,{href:"https://github.com/semgrep/semgrep-interfaces/blob/main/semgrep_output_v1.jsonschema",children:"semgrep/semgrep-interfaces"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["In addition to the ",(0,i.jsx)(s.code,{children:"--text"}),", ",(0,i.jsx)(s.code,{children:"--json"}),", and ",(0,i.jsx)(s.code,{children:"--sarif"})," flags, which set the primary output formats, and the ",(0,i.jsx)(s.code,{children:"--output=<value>"})," flag that saves the results to a file or posts to a URL, you can append ",(0,i.jsx)(s.code,{children:"--<format>-output=<file>"})," to obtain additional output streams:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"# prints findings in SARIF format to standard output and writes in JSON format to `findings.json`.\nsemgrep ci --sarif --json-output=findings.json\n\n# prints findings in text to standard out and writes JSON output to `findings.json`.\nsemgrep ci --json-output=findings.json\n\n# prints text output to `findings.txt` and writes in SARIF to `findings.sarif`.\nsemgrep ci --output=findings.txt --sarif-output=findings.sarif\n\n# writes text to `semgrep.txt`, JSON to `semgrep.json`, and SARIF to `semgrep.sarif`.\nsemgrep ci --text --output=semgrep.txt --json-output=semgrep.json --sarif-output=semgrep.sarif\n"})}),"\n",(0,i.jsxs)(s.p,{children:["Accepted values for ",(0,i.jsx)(s.code,{children:"<format>"}),": ",(0,i.jsx)(s.code,{children:"text"}),", ",(0,i.jsx)(s.code,{children:"json"}),", ",(0,i.jsx)(s.code,{children:"sarif"}),", ",(0,i.jsx)(s.code,{children:"gitlab-sast"}),", ",(0,i.jsx)(s.code,{children:"gitlab-secrets"}),", ",(0,i.jsx)(s.code,{children:"junit-xml"}),", ",(0,i.jsx)(s.code,{children:"emacs"}),", ",(0,i.jsx)(s.code,{children:"vim"})]}),"\n",(0,i.jsx)(s.h2,{id:"test-custom-rules",children:"Test custom rules"}),"\n",(0,i.jsxs)(s.p,{children:["Semgrep includes features to ",(0,i.jsx)(s.a,{href:"/writing-rules/testing-rules",children:"test the custom rules that you write"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"semgrep scan --test\n"})}),"\n",(0,i.jsx)(s.h3,{id:"publish-custom-rules",children:"Publish custom rules"}),"\n",(0,i.jsx)(s.p,{children:"To share your rules by adding them to the Semgrep Registry:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"semgrep publish <path/to/rules>\n"})}),"\n",(0,i.jsx)(s.h2,{id:"scan-without-sending-results-to-semgrep",children:"Scan without sending results to Semgrep"}),"\n",(0,i.jsxs)(s.p,{children:["To scan your project using the configuration you've set up in Semgrep AppSec Platform ",(0,i.jsx)(s.strong,{children:"without"})," sending scan results to Semgrep, use:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"semgrep ci --dry-run\n"})}),"\n",(0,i.jsx)(s.p,{children:"This can be helpful to verify the results of a specific ruleset or to see how your findings change based on the rulesets you choose for your scans."}),"\n",(0,i.jsx)(s.h2,{id:"scan-using-semgrep-ce-analysis-single-function",children:"Scan using Semgrep CE analysis (single-function)"}),"\n",(0,i.jsx)(s.p,{children:"To scan your project using exclusively open source Semgrep, even though you have proprietary cross-file analysis enabled in Semgrep AppSec Platform:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"semgrep ci --oss-only\n"})}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/semgrep-pro-vs-oss",children:"Semgrep AppSec Platform versus Semgrep Community Edition"})," for information on the differences between Semgrep's proprietary and open source analyses."]})}),"\n",(0,i.jsx)(s.h2,{id:"scan-using-specific-semgrep-products",children:"Scan using specific Semgrep products"}),"\n",(0,i.jsxs)(s.p,{children:["When you run ",(0,i.jsx)(s.code,{children:"semgrep ci"}),", you scan your project with any product that is enabled in Semgrep AppSec Platform. To scan your project with just one product, run:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"# scan with Semgrep Code\nsemgrep ci --code\n\n# scan with Semgrep Supply Chain\nsemgrep ci --supply-chain\n\n# scan with Semgrep Secrets\nsemgrep ci --secrets\n"})}),"\n",(0,i.jsx)(s.h2,{id:"extend-timeout-thresholds",children:"Extend timeout thresholds"}),"\n",(0,i.jsxs)(s.p,{children:["Depending on the file sizes in your project, you may need to increase the timeout threshold so that Semgrep doesn't time out before the scan completes. You can control this value using the ",(0,i.jsx)(s.code,{children:"--timeout"})," flag, which refers to the maximum amount of time Semgrep spends scanning a single file. The default value is 5 seconds. Semgrep attempts to scan each file with this timeout value three times, but you can change this using the ",(0,i.jsx)(s.code,{children:"--timeout-threshold"})," flag:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"# increase timeout to 45 seconds, try only 2 times\nsemgrep ci --timeout 45 --timeout-threshold 2\n"})}),"\n",(0,i.jsx)(s.h2,{id:"improve-performance-for-large-codebases",children:"Improve performance for large codebases"}),"\n",(0,i.jsx)(s.p,{children:"You can set the number of subprocesses Semgrep uses to run checks in parallel:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"semgrep scan -j NUMBER_OF_SUBPROCESSES\n"})}),"\n",(0,i.jsxs)(s.p,{children:["By default, the number of jobs Semgrep uses is equivalent to the number of cores detected on the system, but ",(0,i.jsx)(s.code,{children:"-j = 1"})," if you're passing in ",(0,i.jsx)(s.code,{children:"--pro"}),". For additional information, see ",(0,i.jsx)(s.a,{href:"/kb/semgrep-code/scan-engine-kill",children:"Parallelization"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"set-log-levels",children:"Set log levels"}),"\n",(0,i.jsx)(s.p,{children:"Semgrep provides three levels of logging:"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:(0,i.jsx)(s.strong,{children:"Log level"})}),(0,i.jsx)(s.th,{children:(0,i.jsx)(s.strong,{children:"Flag"})}),(0,i.jsx)(s.th,{children:(0,i.jsx)(s.strong,{children:"Description"})})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Default"}),(0,i.jsx)(s.td,{children:"None"}),(0,i.jsx)(s.td,{children:"Prints scan progress, findings information, warnings, and errors."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Verbose"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"-v"})," or ",(0,i.jsx)(s.code,{children:"--verbose"})]}),(0,i.jsx)(s.td,{children:"Includes everything printed when using the default logging level, adding a list of rules and details such as skipped files."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"Debug"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--debug"})}),(0,i.jsx)(s.td,{children:"Logs the entire scan process at a high level of detail."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"example-usage",children:"Example usage"}),"\n",(0,i.jsx)(s.p,{children:"To set the logging level for a scan, include the flag when scanning your project:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"# run a scan and get debug logs\nsemgrep ci --debug\n"})}),"\n",(0,i.jsx)(s.h2,{id:"exit-codes",children:"Exit codes"}),"\n",(0,i.jsxs)(s.p,{children:["The CLI commands ",(0,i.jsx)(s.code,{children:"semgrep ci"})," and ",(0,i.jsx)(s.code,{children:"semgrep scan"})," finish with exit code ",(0,i.jsx)(s.code,{children:"0"})," as long as the scan completes, regardless of whether there were findings. To finish with exit code ",(0,i.jsx)(s.code,{children:"1"})," when there are findings:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"/semgrep-code/policies/#block-a-pr-or-mr-through-rule-modes",children:"Configure blocking rules"})}),"\n",(0,i.jsxs)(s.li,{children:["Pass in the ",(0,i.jsx)(s.code,{children:"--error"})," flag when running ",(0,i.jsx)(s.code,{children:"semgrep scan"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["When you run ",(0,i.jsx)(s.code,{children:"semgrep ci"}),", you can pass in the ",(0,i.jsx)(s.code,{children:"--no-suppress-errors"})," if you don't want ",(0,i.jsx)(s.a,{href:"/cli-reference/#exit-codes",children:"internal errors suppressed"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"log-out",children:"Log out"}),"\n",(0,i.jsx)(s.p,{children:"To log out of your Semgrep account:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-console",children:"semgrep logout\n"})})]})}function p(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}}}]);