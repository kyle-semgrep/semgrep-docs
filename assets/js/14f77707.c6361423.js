"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[28408],{2200:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/no-patch-available-4f1b9b5fa035d3972eeb4915b1e1966b.png"},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var i=s(96540);const r={},a=i.createContext(r);function t(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(a.Provider,{value:n},e.children)}},47683:(e,n,s)=>{s.d(n,{Ay:()=>d,RM:()=>a});var i=s(74848),r=s(28453);const a=[];function t(e){const n={li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"To view detailed information about a finding:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Within Semgrep AppSec Platform, navigate to the ",(0,i.jsx)(n.strong,{children:"Supply Chain"})," page. By default this page loads the ",(0,i.jsx)(n.strong,{children:"Vulnerabilities"})," tab."]}),"\n",(0,i.jsxs)(n.li,{children:["Locate the finding you want to review, then click ",(0,i.jsx)(n.strong,{children:"Details"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The details page is divided into several panels:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["General information:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The name of the package and a description of the finding"}),"\n",(0,i.jsx)(n.li,{children:"Its reachability, whether it is direct or transitive, its CVE number, EPSS, and severity"}),"\n",(0,i.jsx)(n.li,{children:"Its remediation version, if any"}),"\n",(0,i.jsx)(n.li,{children:"Links to references"}),"\n",(0,i.jsx)(n.li,{children:"A badge indicating if it can cause breaking changes or not (beta)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Branch and finding history information","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Branches in which it can be found"}),"\n",(0,i.jsx)(n.li,{children:"Where it was first detected"}),"\n",(0,i.jsx)(n.li,{children:"AI analysis performed, if any"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Graphs and code:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Your code"}),": the source file in which a match was detected; the highlight indicates where the match was found"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Dependency path"}),": displays the path of dependencies; useful when analyzing transitive dependencies"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Pattern"})," and ",(0,i.jsx)(n.strong,{children:"Rule"}),": the pattern and rule logic that determined the match"]}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},49750:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/upgrade-guidance-pr-6a176169f1e4562ace2137cae44202ae.png"},50346:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/upgrade-guidance-flowchart-b8ff76ae3e794eecb0217fbbee21beef.png"},71797:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>d,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"semgrep-supply-chain/upgrade-guidance","title":"Upgrade guidance","description":"Know if a vulnerable package or dependency can be easily and reliably upgraded to a fixed version.","source":"@site/docs/semgrep-supply-chain/upgrade-guidance.md","sourceDirName":"semgrep-supply-chain","slug":"/semgrep-supply-chain/upgrade-guidance","permalink":"/semgrep-docs/semgrep-supply-chain/upgrade-guidance","draft":false,"unlisted":false,"editUrl":"https://github.com/semgrep/semgrep-docs/edit/main/docs/semgrep-supply-chain/upgrade-guidance.md","tags":[{"inline":true,"label":"Semgrep Supply Chain","permalink":"/semgrep-docs/tags/semgrep-supply-chain"},{"inline":true,"label":"Semgrep AppSec Platform","permalink":"/semgrep-docs/tags/semgrep-app-sec-platform"}],"version":"current","lastUpdatedAt":1747935853000,"frontMatter":{"slug":"upgrade-guidance","title":"Upgrade guidance","hide_title":true,"description":"Know if a vulnerable package or dependency can be easily and reliably upgraded to a fixed version.","tags":["Semgrep Supply Chain","Semgrep AppSec Platform"]},"sidebar":"scanSidebar","previous":{"title":"Triage and remediate","permalink":"/semgrep-docs/semgrep-supply-chain/triage-and-remediation"},"next":{"title":"Ignore manifest files, lockfiles, and dependencies","permalink":"/semgrep-docs/semgrep-supply-chain/ignoring-dependencies"}}');var r=s(74848),a=s(28453),t=s(47683);const d={slug:"upgrade-guidance",title:"Upgrade guidance",hide_title:!0,description:"Know if a vulnerable package or dependency can be easily and reliably upgraded to a fixed version.",tags:["Semgrep Supply Chain","Semgrep AppSec Platform"]},l="Upgrade guidance",c={},h=[{value:"Feature maturity",id:"feature-maturity",level:2},{value:"Supported languages and package managers",id:"supported-languages-and-package-managers",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Grant <strong>Read and write</strong> access to a private GitHub Semgrep app",id:"grant-read-and-write-access-to-a-private-github-semgrep-app",level:3},{value:"How it works",id:"how-it-works",level:2},{value:"Review a finding&#39;s upgrade guidance",id:"review-a-findings-upgrade-guidance",level:2},...t.RM,{value:"Create a pull request with fixes",id:"create-a-pull-request-with-fixes",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"The feature has been enabled, but you don&#39;t see any analysis",id:"the-feature-has-been-enabled-but-you-dont-see-any-analysis",level:3}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"upgrade-guidance",children:"Upgrade guidance"})}),"\n",(0,r.jsx)(n.p,{children:"Know if you or your developers can safely and reliably update a vulnerable package or dependency to a fixed version. From there, choose to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Have Semgrep open a pull request (PR)"}),"\n",(0,r.jsx)(n.li,{children:"Create a Jira ticket"}),"\n",(0,r.jsxs)(n.li,{children:["Set the finding's triage status as ",(0,r.jsx)(n.strong,{children:"To fix"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Semgrep's dependency upgrade guidance uses ",(0,r.jsx)(n.a,{href:"/semgrep-assistant/overview",children:"Assistant"})," to analyze if a finding can be ",(0,r.jsx)(n.strong,{children:"safely upgraded"})," or if upgrading the package can cause ",(0,r.jsx)(n.strong,{children:"breaking changes"}),". Semgrep can also create a PR to upgrade the package."]}),"\n",(0,r.jsx)(n.h2,{id:"feature-maturity",children:"Feature maturity"}),"\n",(0,r.jsxs)(n.p,{children:["This feature is in ",(0,r.jsx)(n.strong,{children:"private beta"}),". To join the beta, reach out to the ",(0,r.jsx)(n.a,{href:"/support",children:"Semgrep support team"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"supported-languages-and-package-managers",children:"Supported languages and package managers"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Python"})," codebases with the following package managers:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"pip"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"pip-tools"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"pipenv"})}),"\n",(0,r.jsx)(n.li,{children:"Poetry"}),"\n",(0,r.jsx)(n.li,{children:"uv"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["GitHub Cloud and GitHub Enterprise Server (self-hosted)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["This ",(0,r.jsx)(n.strong,{children:"includes"})," projects added to Semgrep through Semgrep Managed Scans"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["At least one repository that ",(0,r.jsx)(n.a,{href:"/semgrep-supply-chain/getting-started",children:"scans for dependencies through Semgrep Supply Chain"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Semgrep Assistant must be ",(0,r.jsx)(n.a,{href:"/semgrep-assistant/getting-started",children:"enabled"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Your ",(0,r.jsx)(n.strong,{children:"private"})," GitHub Semgrep app must have ",(0,r.jsxs)(n.a,{href:"#grant-read-and-write-access-to-a-private-github-semgrep-ap#grant-read-and-write-access-to-a-private-github-semgrep-appp",children:[(0,r.jsx)(n.strong,{children:"Read and write"})," access on the ",(0,r.jsx)(n.strong,{children:"Contents"})," permission"]}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"grant-read-and-write-access-to-a-private-github-semgrep-app",children:["Grant ",(0,r.jsx)(n.strong,{children:"Read and write"})," access to a private GitHub Semgrep app"]}),"\n",(0,r.jsx)(n.p,{children:"To change your Semgrep app's permission:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to the settings page of your private Semgrep GitHub app; refer to ",(0,r.jsxs)(n.a,{href:"https://docs.github.com/en/apps/maintaining-github-apps/modifying-a-github-app-registration#changing-the-permissions-of-a-github-app",children:[(0,r.jsx)("i",{class:"fas fa-external-link fa-xs"})," Changing the permissions of a GitHub app"]})," for instructions."]}),"\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.strong,{children:"Repository permissions"})," section, search for ",(0,r.jsx)(n.code,{children:"Contents"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Click the drop-down menu and select ",(0,r.jsx)(n.strong,{children:"Read and write"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,r.jsxs)(n.p,{children:["After enabling dependency guidance, Semgrep performs post-scan analysis and marks applicable findings as ",(0,r.jsx)(n.strong,{children:"Safe to upgrade"})," or with ",(0,r.jsx)(n.strong,{children:"Breaking changes"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["This analysis is performed every ",(0,r.jsx)(n.strong,{children:"two hours"})," on the latest ",(0,r.jsx)(n.strong,{children:"full scan"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Only findings whose dependencies have ",(0,r.jsx)(n.strong,{children:"fixed versions"})," that resolve the vulnerability are marked by Semgrep as ",(0,r.jsx)(n.strong,{children:"Safe to upgrade"})," or with ",(0,r.jsx)(n.strong,{children:"Breaking changes"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Findings without any fixed versions have no badge; instead they say ",(0,r.jsx)(n.strong,{children:"no patch available"}),".\n",(0,r.jsx)(n.img,{alt:"Finding with no fixed version available",src:s(2200).A+"#md-width",width:"1657",height:"442"}),"\n",(0,r.jsxs)(n.em,{children:[(0,r.jsx)(n.strong,{children:"Figure"}),". ",(0,r.jsx)(n.strong,{children:"Details"})," page for a finding that has no available fix."]})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The following chart shows the steps Semgrep performs from scanning to analysis and the actions you can take based on the advice it shows."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Flowchart explaining how Semgrep provides upgrade guidance and possible actions to take based on its advice.",src:s(50346).A+"",width:"1430",height:"1626"})}),"\n",(0,r.jsx)(n.h2,{id:"review-a-findings-upgrade-guidance",children:"Review a finding's upgrade guidance"}),"\n",(0,r.jsx)(t.Ay,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.img,{alt:"SSC details that provide upgrade guidance.",src:s(87745).A+"",width:"1600",height:"1250"}),"\n",(0,r.jsxs)(n.em,{children:[(0,r.jsx)(n.strong,{children:"Figure"}),". Useful details that provide upgrade guidance."]})]}),"\n",(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{children:"A - Upgrade badge"}),(0,r.jsx)("dd",{children:"Indicates if an upgrade is safe or may break your codebase."}),(0,r.jsx)("dt",{children:"B - The line of code (LOC) of the finding"}),(0,r.jsxs)("dd",{children:["This shows the LOC that caused the finding; this does ",(0,r.jsx)("strong",{children:"not"})," show the LOC where the breaking changes occur."]}),(0,r.jsx)("dt",{children:"C - Link to change list drawer"}),(0,r.jsx)("dd",{children:"Click this link to display the LOC where a breaking change may occur."}),(0,r.jsx)("dt",{children:"D - Open fix PR button"}),(0,r.jsx)("dd",{children:"Click this button to open a PR with the code to upgrade the dependency to a safe version, if any."})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.img,{alt:"Drawer showing all lines of code that must be changed",src:s(84531).A+"#md-width",width:"888",height:"506"}),"\n",(0,r.jsxs)(n.em,{children:[(0,r.jsx)(n.strong,{children:"Figure"}),". Drawer showing all the lines of code that must be changed or are safe."]})]}),"\n",(0,r.jsx)(n.h2,{id:"create-a-pull-request-with-fixes",children:"Create a pull request with fixes"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to the ",(0,r.jsx)(n.strong,{children:"Details"})," page of the finding for which you want to make a pull request."]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Fix"})," > ",(0,r.jsx)(n.strong,{children:"Open fix PR"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"A pull request includes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The manifest or lockfile changes necessary to upgrade the dependency"}),"\n",(0,r.jsx)(n.li,{children:"The context necessary for developers to fix potentially breaking changes"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The following context is included in the pull request description:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Summary","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Severity and reachability of the finding"}),"\n",(0,r.jsx)(n.li,{children:"The specific version of the dependency that the PR upgrades to"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Vulnerability details","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A description of the vulnerability and links to its CVE references"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Upgrade guidance","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All the pieces of code, typically functions, which make use of the dependency"}),"\n",(0,r.jsx)(n.li,{children:"Unchanged (safe) pieces of code"}),"\n",(0,r.jsx)(n.li,{children:"Potentially breaking pieces of code"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Dependency references","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Release notes, changelogs, and commits of the dependency which may be useful to resolve the breaking changes"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.img,{alt:"PR comment with upgrade guidance",src:s(49750).A+"#md-width",width:"1474",height:"1598"}),"\n",(0,r.jsxs)(n.em,{children:[(0,r.jsx)(n.strong,{children:"Figure"}),". PR comment with upgrade guidance."]})]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"the-feature-has-been-enabled-but-you-dont-see-any-analysis",children:"The feature has been enabled, but you don't see any analysis"}),"\n",(0,r.jsxs)(n.p,{children:["If you can't see any ",(0,r.jsx)(n.strong,{children:"Breaking changes"})," or ",(0,r.jsx)(n.strong,{children:"Safe to upgrade"})," badges or findings, this may be due to the following reasons:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Your language or package ecosystem isn't supported"}),"\n",(0,r.jsx)(n.li,{children:"Your source code manager isn't supported"}),"\n",(0,r.jsxs)(n.li,{children:["Your you have not set ",(0,r.jsx)(n.strong,{children:"Read and write"})," access for the ",(0,r.jsx)(n.strong,{children:"Contents"})," permission; see ",(0,r.jsx)(n.a,{href:"#grant-read-and-write-access",children:"Grant read and write access"})]}),"\n",(0,r.jsx)(n.li,{children:"Your findings don't have safe versions to upgrade to yet"}),"\n",(0,r.jsx)(n.li,{children:"You have no findings within the supported scope of this feature"}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},84531:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/upgrade-guidance-drawer-55701ed2c0ed5030b86f2288929b0b9b.png"},87745:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/vuln-panels-ssc-3b1c3e65259b1fd774dbbe8ca3cd794c.png"}}]);