"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[83336],{15618:(e,r,n)=>{n.d(r,{A:()=>s});const s=n.p+"assets/images/primary-branch-ded868163a3219896c9b4bee2914c9f9.png"},28453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>o});var s=n(96540);const i={},t=s.createContext(i);function a(e){const r=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:r},e.children)}},55831:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"deployment/primary-branch","title":"Set a primary branch","description":"Set your primary or default branch to ensure Semgrep full scans display accurate counts and deduplicated findings.","source":"@site/docs/deployment/primary-branch.md","sourceDirName":"deployment","slug":"/deployment/primary-branch","permalink":"/semgrep-docs/deployment/primary-branch","draft":false,"unlisted":false,"editUrl":"https://github.com/kyle-semgrep/semgrep-docs/edit/main/docs/deployment/primary-branch.md","tags":[{"inline":true,"label":"Deployment","permalink":"/semgrep-docs/tags/deployment"}],"version":"current","lastUpdatedAt":1752260268000,"frontMatter":{"slug":"primary-branch","title":"Set a primary branch","hide_title":true,"description":"Set your primary or default branch to ensure Semgrep full scans display accurate counts and deduplicated findings.","tags":["Deployment"]},"sidebar":"scanSidebar","previous":{"title":"Manage projects","permalink":"/semgrep-docs/deployment/manage-projects"},"next":{"title":"Troubleshooting CI","permalink":"/semgrep-docs/troubleshooting/semgrep-app"}}');var i=n(74848),t=n(28453);const a={slug:"primary-branch",title:"Set a primary branch",hide_title:!0,description:"Set your primary or default branch to ensure Semgrep full scans display accurate counts and deduplicated findings.",tags:["Deployment"]},o="Set a primary branch",c={},l=[{value:"Prerequisite",id:"prerequisite",level:2},{value:"Find projects without a primary branch",id:"find-projects-without-a-primary-branch",level:2},{value:"Changes to existing URLs",id:"changes-to-existing-urls",level:2},{value:"Set a project&#39;s primary branch",id:"set-a-projects-primary-branch",level:2},{value:"Through the web app",id:"through-the-web-app",level:3},{value:"Through an API endpoint",id:"through-an-api-endpoint",level:3},{value:"How Semgrep counts findings in the Projects page",id:"how-semgrep-counts-findings-in-the-projects-page",level:3}];function h(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"set-a-primary-branch",children:"Set a primary branch"})}),"\n",(0,i.jsxs)(r.p,{children:["A ",(0,i.jsx)(r.strong,{children:"primary branch"})," is the base or target branch for pull requests and merge requests. It is usually referred to as a ",(0,i.jsx)(r.strong,{children:"default branch"})," or ",(0,i.jsx)(r.strong,{children:"trunk"})," by your source code manager (SCM). Typical names for a primary branch include ",(0,i.jsx)(r.code,{children:"dev"}),", ",(0,i.jsx)(r.code,{children:"production"}),", or ",(0,i.jsx)(r.code,{children:"develop"}),"."]}),"\n",(0,i.jsx)(r.p,{children:"In many cases, Semgrep automatically detects primary branches when they first scan your project. If you have projects (repositories) with unique primary branch names, you can set them through the Semgrep web app."}),"\n",(0,i.jsxs)(r.p,{children:["A primary branch enables Semgrep to filter your findings by branch and to accurately deduplicate findings. The primary branch is also used to analyze the deployment of ",(0,i.jsx)(r.a,{href:"/secure-guardrails/secure-guardrails-in-semgrep",children:"secure guardrails"})," to your developers; findings fixed before they are merged into the primary branch reduces the overall production backlog."]}),"\n",(0,i.jsx)(r.p,{children:"The following video provides an introduction and walkthrough:"}),"\n",(0,i.jsx)("iframe",{class:"yt_embed",width:"100%",height:"432px",src:"https://www.youtube.com/embed/gUjiVXLqK70",frameborder:"0",allowfullscreen:!0}),"\n",(0,i.jsx)(r.h2,{id:"prerequisite",children:"Prerequisite"}),"\n",(0,i.jsxs)(r.p,{children:["Ensure that the project you want to set a primary branch for has completed ",(0,i.jsx)(r.strong,{children:"at least one full scan"})," successfully."]}),"\n",(0,i.jsx)(r.h2,{id:"find-projects-without-a-primary-branch",children:"Find projects without a primary branch"}),"\n",(0,i.jsxs)(r.p,{children:["Projects without primary branches have an orange information icon ",(0,i.jsxs)("span",{style:{color:"orange"},children:[" ",(0,i.jsx)("i",{class:"fa-solid fa-circle-exclamation"})]})," next to their name in the ",(0,i.jsx)(r.strong,{children:"Projects"})," page."]}),"\n",(0,i.jsx)(r.h2,{id:"changes-to-existing-urls",children:"Changes to existing URLs"}),"\n",(0,i.jsxs)(r.p,{children:["For Semgrep AppSec Platform users whose accounts were created prior to September 4, 2024, this feature may affect any bookmarks or saved links created for custom views or slices in product pages such as ",(0,i.jsx)(r.strong,{children:"Code"}),", ",(0,i.jsx)(r.strong,{children:"Supply Chain > Vulnerabilities"}),", and ",(0,i.jsx)(r.strong,{children:"Secrets"}),". The primary branch feature deprecates certain filters, which affect the parameters in your URL. In these cases, you may have to re-create your bookmarks."]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["The following parameters are deprecated:","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"ref=_default"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"ref=_other"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["For ",(0,i.jsx)(r.strong,{children:"Code"})," page and ",(0,i.jsx)(r.strong,{children:"Supply Chain > Vulnerabilities"})," tab:","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Bookmarks that use the ",(0,i.jsx)(r.code,{children:"ref"})," parameter without a ",(0,i.jsx)(r.code,{children:"repo"}),", your URL will be redirected to the default view instead."]}),"\n",(0,i.jsxs)(r.li,{children:["Bookmarks that use any number of ",(0,i.jsx)(r.code,{children:"repo"})," parameters without a ",(0,i.jsx)(r.code,{children:"ref"})," will display the findings of primary branches for all repositories selected."]}),"\n",(0,i.jsxs)(r.li,{children:["Any filters using multiple ",(0,i.jsx)(r.code,{children:"refs"})," now show only one ",(0,i.jsx)(r.code,{children:"ref"}),", such as the primary branch."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"set-a-projects-primary-branch",children:"Set a project's primary branch"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Primary branches are set on a ",(0,i.jsx)(r.strong,{children:"per-project"})," basis in the Semgrep web app. To quickly update your primary branches, use the ",(0,i.jsx)(r.a,{href:"#through-an-api-endpoint",children:"API endpoint"}),"."]}),"\n",(0,i.jsxs)(r.li,{children:["For more information on how primary branches may affect existing projects behavior see:","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"#changes-to-existing-urls",children:"Changes to existing URLs"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/deployment/primary-branch#how-semgrep-counts-findings-in-the-projects-page",children:"How Semgrep counts findings in the projects page"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"through-the-web-app",children:"Through the web app"}),"\n",(0,i.jsx)(r.admonition,{type:"info",children:(0,i.jsx)(r.p,{children:"For Semgrep AppSec Platform users whose accounts were created prior to September 4, 2024, you may have to sign out and sign in again for this feature to appear."})}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["In the Semgrep web app, click ",(0,i.jsx)(r.strong,{children:"Projects"}),"."]}),"\n",(0,i.jsx)(r.li,{children:"Search for your project's name."}),"\n",(0,i.jsxs)(r.li,{children:["Click the ",(0,i.jsxs)(r.strong,{children:[(0,i.jsx)("i",{class:"fa-solid fa-gear"})," gear icon"]})," to access the settings page for that project."]}),"\n",(0,i.jsxs)(r.li,{children:["In the ",(0,i.jsx)(r.strong,{children:"Primary branch"})," section, click the drop-down box and select a branch. The drop-down menu shows a list of ",(0,i.jsx)(r.strong,{children:"scanned branches"}),"."]}),"\n",(0,i.jsxs)(r.li,{children:["Click ",(0,i.jsx)(r.strong,{children:"Save"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.img,{alt:"Primary branch selection",src:n(15618).A+"#sm-width",width:"801",height:"275"}),"\n",(0,i.jsxs)(r.em,{children:[(0,i.jsx)(r.strong,{children:"Figure"}),". Projects > Project ",(0,i.jsx)("i",{class:"fa-solid fa-gear"})," settings page > Primary branch selection."]})]}),"\n",(0,i.jsx)(r.h3,{id:"through-an-api-endpoint",children:"Through an API endpoint"}),"\n",(0,i.jsxs)(r.p,{children:["You can also send a ",(0,i.jsx)(r.code,{children:"patch"})," request to the following endpoint: ",(0,i.jsx)(r.a,{href:"https://semgrep.dev/api/v1/docs/#tag/Project/operation/semgrep_app.saas.handlers.repository.openapi_patch_project",children:"Deployment > Project endpoint"}),". Add the ",(0,i.jsx)(r.code,{children:"primary_branch"})," key in the request body."]}),"\n",(0,i.jsx)(r.h3,{id:"how-semgrep-counts-findings-in-the-projects-page",children:"How Semgrep counts findings in the Projects page"}),"\n",(0,i.jsxs)(r.p,{children:["You can view a total count of findings in the ",(0,i.jsx)(r.strong,{children:"Projects"})," page for all Semgrep products."]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["For Code and Supply Chain, this total count is computed from the ",(0,i.jsx)(r.strong,{children:"primary branch"}),"."]}),"\n",(0,i.jsx)(r.li,{children:"For Secrets, this total count is computed from deduplicated findings across all branches."}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"This means that the count of findings in your Code, Secrets, or Supply Chain page may differ from the counts in your Projects page."}),"\n",(0,i.jsx)(r.p,{children:"The following links explain how Semgrep presents findings for each Semgrep product in their respective page:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/docs/semgrep-code/findings#default-page-view",children:"Semgrep Code default view"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/semgrep-supply-chain/triage-and-remediation",children:"Semgrep Supply Chain > Vulnerabilities tab view"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/semgrep-secrets/view-triage#default-secrets-page-view-and-branch-logic",children:"Semgrep Secrets default view"})}),"\n"]})]})}function d(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);