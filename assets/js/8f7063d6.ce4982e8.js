"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[42127],{6655:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/in-app-providers-4e065c15025f44a089e19cf9c1c30d5e.png"},14345:(e,n,r)=>{r.d(n,{A:()=>o});r(96540);var s=r(34164);const t={tabItem:"tabItem_Ymn6"};var i=r(74848);function o(e){let{children:n,hidden:r,className:o}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.A)(t.tabItem,o),hidden:r,children:n})}},19527:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/projects-page-1b42876e92d2fde142c2897092a65a1b.png"},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var s=r(96540);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},47445:(e,n,r)=>{r.d(n,{Ay:()=>l,RM:()=>i});var s=r(74848),t=r(28453);const i=[];function o(e){const n={p:"p",strong:"strong",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Semgrep scans can be classified by ",(0,s.jsx)(n.strong,{children:"scope"}),". The scope of a scan refers to what lines of code are scanned in a codebase. When classifying scans by scope, there are two types of scans:"]}),"\n",(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{children:"Full scan"}),(0,s.jsx)("dd",{children:(0,s.jsx)("p",{children:(0,s.jsxs)(n.p,{children:["A full scan runs on your entire codebase and reports every finding in the\ncodebase. It is recommended to perform a full scan of your default branch,\nsuch as ",(0,s.jsx)("code",{children:"main"})," or ",(0,s.jsx)("code",{children:"master"})," at a regular cadence,\nsuch as every night or every week. This ensures that Semgrep AppSec\nPlatform has a full list of all findings in your code base, regardless of\nwhen they were introduced. To run a full scan, run ",(0,s.jsx)("code",{children:"semgrep ci"})," ","\nwithout setting the ",(0,s.jsx)("code",{children:"SEMGREP_BASELINE_REF"})," environment\nvariable. Full scans are triggered at a scheduled time, when the"," ","\n",(0,s.jsx)("code",{children:"semgrep.yml"})," file is edited, or manually by a user."]})})}),(0,s.jsx)("dt",{children:"Diff-aware scan"}),(0,s.jsxs)("dd",{children:[(0,s.jsx)("p",{children:(0,s.jsx)(n.p,{children:'A diff-aware scan runs on your code before and after some "baseline" and\nonly reports findings that are newly introduced in the commits after that\nbaseline. Typically, Semgrep runs diff-aware scans upon the creation of a\nnew pull request or merge request.'})}),(0,s.jsx)("p",{children:(0,s.jsxs)(n.p,{children:["For example, imagine a hypothetical repository with 10 commits. You set\ncommit number 8 as the baseline. Consequently, Semgrep only returns scan\nresults introduced by changes in commits 9 and 10. This is how"," ","\n",(0,s.jsx)("code",{children:"semgrep ci"})," can run in pull requests and merge requests, since\nit reports only the findings that are created by those code changes."]})}),(0,s.jsx)("p",{children:(0,s.jsxs)(n.p,{children:["To run a diff-aware scan, use ",(0,s.jsxs)("code",{children:["SEMGREP_BASELINE_REF=",(0,s.jsx)("span",{class:"placeholder",children:"REF "}),"semgrep ci"]}),"\nwhere ",(0,s.jsx)("span",{class:"placeholder",children:"REF"})," can be a commit hash, branch\nname, or other Git reference. Note that the ",(0,s.jsx)("code",{children:"SEMGREP_BASELINE_REF"}),"\ndoes not apply to GitHub Actions and GitLab CI/CD environments. This variable\ncannot be set to turn a diff-aware scan in GitHub Actions or GitLab CI/CD into\na full scan."]})})]})]})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},62464:(e,n,r)=>{r.d(n,{A:()=>S});var s=r(96540),t=r(34164),i=r(80052),o=r(56347),l=r(35793),a=r(99025),c=r(4430),d=r(44148);function p(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:r}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return p(e).map((e=>{let{props:{value:n,label:r,attributes:s,default:t}}=e;return{value:n,label:r,attributes:s,default:t}}))}(r);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function u(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:r}=e;const t=(0,o.W6)(),i=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,a.aZ)(i),(0,s.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(t.location.search);n.set(i,e),t.replace({...t.location,search:n.toString()})}),[i,t])]}function g(e){const{defaultValue:n,queryString:r=!1,groupId:t}=e,i=h(e),[o,a]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!u({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=r.find((e=>e.default))??r[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:i}))),[c,p]=m({queryString:r,groupId:t}),[g,f]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[t,i]=(0,d.Dv)(r);return[t,(0,s.useCallback)((e=>{r&&i.set(e)}),[r,i])]}({groupId:t}),j=(()=>{const e=c??g;return u({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{j&&a(j)}),[j]);return{selectedValue:o,selectValue:(0,s.useCallback)((e=>{if(!u({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);a(e),p(e),f(e)}),[p,f,i]),tabValues:i}}var f=r(75251);const j={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=r(74848);function y(e){let{className:n,block:r,selectedValue:s,selectValue:o,tabValues:l}=e;const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),d=e=>{const n=e.currentTarget,r=a.indexOf(n),t=l[r].value;t!==s&&(c(n),o(t))},p=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=a.indexOf(e.currentTarget)+1;n=a[r]??a[0];break}case"ArrowLeft":{const r=a.indexOf(e.currentTarget)-1;n=a[r]??a[a.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":r},n),children:l.map((e=>{let{value:n,label:r,attributes:i}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>{a.push(e)},onKeyDown:p,onClick:d,...i,className:(0,t.A)("tabs__item",j.tabItem,i?.className,{"tabs__item--active":s===n}),children:r??n},n)}))})}function b(e){let{lazy:n,children:r,selectedValue:i}=e;const o=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===i));return e?(0,s.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function v(e){const n=g(e);return(0,x.jsxs)("div",{className:(0,t.A)("tabs-container",j.tabList),children:[(0,x.jsx)(y,{...n,...e}),(0,x.jsx)(b,{...n,...e})]})}function S(e){const n=(0,f.A)();return(0,x.jsx)(v,{...e,children:p(e.children)},String(n))}},69895:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>x,contentTitle:()=>j,default:()=>v,frontMatter:()=>f,metadata:()=>s,toc:()=>y});const s=JSON.parse('{"id":"deployment/add-semgrep-to-ci","title":"Add Semgrep to CI/CD","description":"Set up your CI pipeline with Semgrep AppSec Platform for centralized rule and findings management.","source":"@site/docs/deployment/add-semgrep-to-ci.md","sourceDirName":"deployment","slug":"/deployment/add-semgrep-to-ci","permalink":"/docs/deployment/add-semgrep-to-ci","draft":false,"unlisted":false,"editUrl":"https://github.com/kyle-semgrep/semgrep-docs/edit/main?base=kyle-semgrep:main/docs/deployment/add-semgrep-to-ci.md","tags":[{"inline":true,"label":"Deployment","permalink":"/docs/tags/deployment"},{"inline":true,"label":"Semgrep AppSec Platform","permalink":"/docs/tags/semgrep-app-sec-platform"}],"version":"current","lastUpdatedAt":1752253235000,"frontMatter":{"slug":"add-semgrep-to-ci","title":"Add Semgrep to CI/CD","hide_title":true,"description":"Set up your CI pipeline with Semgrep AppSec Platform for centralized rule and findings management.","tags":["Deployment","Semgrep AppSec Platform"]},"sidebar":"scanSidebar","previous":{"title":"Scan repositories with the AppSec Platform","permalink":"/docs/category/scan-repositories-with-the-appsec-platform"},"next":{"title":"Add Semgrep to other CI providers","permalink":"/docs/deployment/add-semgrep-to-other-ci-providers"}}');var t=r(74848),i=r(28453);function o(e){const n={a:"a",code:"code",li:"li",ol:"ol",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"To add a Semgrep job to your CI provider:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure you are signed in to Semgrep AppSec Platform."}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://semgrep.dev/orgs/-/projects",children:"Projects"})})," on the left sidebar."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Scan new project > CI/CD"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Click the name of the CI provider you use. You are taken to the ",(0,t.jsx)(n.strong,{children:"Add job"})," page."]}),"\n",(0,t.jsxs)(n.li,{children:["Follow the steps provided on the page. The process varies depending on your CI provider, but generally includes the following steps:","\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Create new token"})," to create a ",(0,t.jsx)(n.code,{children:"SEMGREP_APP_TOKEN"}),", which is used to when sending results to Semgrep AppSec Platform."]}),"\n",(0,t.jsxs)(n.li,{children:["Copy and paste the ",(0,t.jsx)(n.code,{children:"SEMGREP_APP_TOKEN"})," and its value. Store it as an environment variable or secret in your CI provider."]}),"\n",(0,t.jsxs)(n.li,{children:["Optional: Click ",(0,t.jsx)(n.strong,{children:"Review CI config"})," to see Semgrep's default YAML configuration file for your CI provider."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Copy snippet"})," and paste it into your CI provider's configuration file (the filename is typically indicated in the page). Depending on your CI provider, you may have to create a custom configuration file or use an existing one."]}),"\n",(0,t.jsx)(n.li,{children:"Commit the configuration file to your repository."}),"\n",(0,t.jsxs)(n.li,{children:["Return to Semgrep AppSec Platform and click ",(0,t.jsx)(n.strong,{children:"Check connection"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["You have now added a Semgrep job to your CI provider; this starts your first ",(0,t.jsx)(n.strong,{children:"full scan"}),". Its findings are sent to Semgrep AppSec Platform for triage and remediation."]})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}function a(e){const n={code:"code",li:"li",ol:"ol",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["If you aren't seeing your GitHub repos in the Cloud Platform, complete the following steps to ensure that your GitHub repository is ",(0,t.jsx)(n.strong,{children:"detected"})," by Semgrep AppSec Platform:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Log in to GitHub."}),"\n",(0,t.jsxs)(n.li,{children:["Perform one of the following steps:","\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["For repositories in personal accounts: Click your ",(0,t.jsx)(n.strong,{children:"profile photo > Settings > Applications"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["For repositories in org accounts: Click your ",(0,t.jsxs)(n.strong,{children:["profile photo > Your organizations > ",(0,t.jsx)("span",{class:"placeholder",children:"NAME_OF_ORG"})," > Settings > GitHub Apps"]}),"."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["On the ",(0,t.jsx)(n.code,{children:"semgrep-app"})," entry, click ",(0,t.jsx)(n.strong,{children:"Configure"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Under ",(0,t.jsx)(n.strong,{children:"Repository access"})," select an option to provide access:","\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"All repositories will display all current and future public and private repositories."}),"\n",(0,t.jsx)(n.li,{children:"Only select repositories will display explicitly selected repositories."}),"\n"]}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}var d=r(91224),p=r(47445),h=r(62464),u=r(14345);function m(e){const n={a:"a",admonition:"admonition",li:"li",ol:"ol",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In Semgrep AppSec Platform, click ",(0,t.jsxs)(n.strong,{children:[(0,t.jsx)("i",{class:"fa-solid fa-folder-open"})," Projects"]}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Search for your repository's name."}),"\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsxs)(n.strong,{children:[(0,t.jsx)("i",{class:"fa-regular fa-window-restore"})," windows icon"]})," to access the settings page for that project."]}),"\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"three-dot (...) button"})," at the header and click ",(0,t.jsx)(n.strong,{children:"Delete project"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["It can take up to a day ",(0,t.jsx)(n.strong,{children:"(24 hours)"})," for the ",(0,t.jsx)(n.a,{href:"/semgrep-appsec-platform/dashboard",children:"Dashboard"})," to correctly update and remove findings associated with a recently deleted project."]})})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}const f={slug:"add-semgrep-to-ci",title:"Add Semgrep to CI/CD",hide_title:!0,description:"Set up your CI pipeline with Semgrep AppSec Platform for centralized rule and findings management.",tags:["Deployment","Semgrep AppSec Platform"]},j="Add Semgrep to CI",x={},y=[{value:"Guided setup for CI providers in Semgrep AppSec Platform",id:"guided-setup-for-ci-providers-in-semgrep-appsec-platform",level:2},{value:"Projects",id:"projects",level:2},{value:"Add Semgrep to CI",id:"add-semgrep-to-ci-1",level:2},{value:"Detecting GitHub repositories",id:"detecting-github-repositories",level:3},{value:"Sample CI configuration snippets",id:"sample-ci-configuration-snippets",level:3},{value:"Data collected by Semgrep",id:"data-collected-by-semgrep",level:3},{value:"Delete a project",id:"delete-a-project",level:3},{value:"Scan scope",id:"scan-scope",level:2},...p.RM,{value:"Default branch names",id:"default-branch-names",level:3},{value:"Next steps",id:"next-steps",level:2},...d.RM];function b(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"add-semgrep-to-ci",children:"Add Semgrep to CI"})}),"\n",(0,t.jsx)(n.admonition,{title:"Your deployment journey",type:"note",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["You have gained the necessary ",(0,t.jsx)(n.a,{href:"/deployment/checklist",children:"resource access and permissions"})," required for deployment."]}),"\n",(0,t.jsxs)(n.li,{children:["You have ",(0,t.jsx)(n.a,{href:"/deployment/create-account-and-orgs",children:"created a Semgrep account and organization"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["For GitHub and GitLab users: You have ",(0,t.jsx)(n.a,{href:"/deployment/connect-scm",children:"connected your source code manager"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Optionally, you have ",(0,t.jsx)(n.a,{href:"/deployment/sso",children:"set up SSO"}),"."]}),"\n"]})}),"\n",(0,t.jsxs)(n.p,{children:["Semgrep is integrated into CI environments by creating a ",(0,t.jsx)(n.strong,{children:"job"})," that is run by the CI provider. After a scan, findings are sent to Semgrep AppSec Platform for triage and remediation."]}),"\n",(0,t.jsx)(n.p,{children:"By integrating Semgrep into your CI environment, your development cycle benefits from the automated scanning of repositories at various events, such as:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Push events"}),"\n",(0,t.jsx)(n.li,{children:"Pull requests or merge requests (PRs or MRs)"}),"\n",(0,t.jsxs)(n.li,{children:["User-initiated events (such as GitHub Action's ",(0,t.jsx)(n.code,{children:"workflow_dispatch"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"guided-setup-for-ci-providers-in-semgrep-appsec-platform",children:"Guided setup for CI providers in Semgrep AppSec Platform"}),"\n",(0,t.jsx)(n.p,{children:"This guide walks you through creating a Semgrep job in the following CI providers, which are explicitly supported in Semgrep AppSec Platform:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"GitHub Actions"}),"\n",(0,t.jsx)(n.li,{children:"GitLab CI/CD"}),"\n",(0,t.jsx)(n.li,{children:"Jenkins"}),"\n",(0,t.jsx)(n.li,{children:"Bitbucket"}),"\n",(0,t.jsx)(n.li,{children:"CircleCI"}),"\n",(0,t.jsx)(n.li,{children:"Buildkite"}),"\n",(0,t.jsx)(n.li,{children:"Azure Pipelines"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"CI providers explicitly supported in Semgrep AppSec Platform.",src:r(6655).A+"#md-width",width:"1339",height:"805"}),"\n",(0,t.jsxs)(n.em,{children:[(0,t.jsx)(n.strong,{children:"Figure"}),". Semgrep AppSec Platform provides steps and configuration files to easily set up a Semgrep job for popular CI providers."]})]}),"\n",(0,t.jsxs)(n.p,{children:["If your provider is ",(0,t.jsx)(n.strong,{children:"not"})," on this list, you can still integrate Semgrep into your CI workflows by following the steps in ",(0,t.jsxs)(n.a,{href:"/deployment/add-semgrep-to-other-ci-providers",children:[(0,t.jsx)("i",{class:"fa-regular fa-file-lines"})," Add Semgrep to other CI providers"]}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"projects",children:"Projects"}),"\n",(0,t.jsxs)(n.p,{children:["Adding a Semgrep job to your CI provider also adds the repository's records, including findings, as a ",(0,t.jsx)(n.strong,{children:"project"})," in Semgrep AppSec Platform. Each project can be individually configured to send notifications or tickets."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.img,{alt:"Semgrep Projects page",src:r(19527).A+"",width:"1706",height:"576"}),"\n",(0,t.jsxs)(n.em,{children:[(0,t.jsx)(n.strong,{children:"Figure."})," Semgrep ",(0,t.jsx)(n.strong,{children:"Projects"})," page. This displays all the projects you have successfully added to Semgrep."]})]}),"\n",(0,t.jsx)(n.h2,{id:"add-semgrep-to-ci-1",children:"Add Semgrep to CI"}),"\n",(0,t.jsxs)(h.A,{defaultValue:"other",values:[{label:"Supported CI providers",value:"other"},{label:"GitHub Actions",value:"gha"}],children:[(0,t.jsxs)(u.A,{value:"gha",children:[(0,t.jsx)(n.p,{children:"To add a CI job to GitHub Actions:"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure you are signed in to Semgrep AppSec Platform."}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://semgrep.dev/orgs/-/projects",children:"Projects"})})," on the left sidebar."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Scan new project > CI/CD"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"GitHub Actions"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"A list of repositories appears. Select all the repositories you want to add a Semgrep job to."}),"\n",(0,t.jsxs)(n.li,{children:["If you do not see the repository you want to add, adjust ",(0,t.jsxs)(n.a,{href:"https://github.com/settings/installations",children:[(0,t.jsx)("i",{class:"fas fa-external-link fa-xs"})," GitHub Application's Repository Access"]})," configuration. See ",(0,t.jsx)(n.a,{href:"#detecting-github-repositories",children:"Detecting GitHub repositories"})," for more information."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Add CI job"}),". You are taken to the Add CI job page."]}),"\n",(0,t.jsxs)(n.li,{children:["Optional: Click ",(0,t.jsx)(n.strong,{children:"Review CI config"})," to see Semgrep's default YAML configuration file."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Commit file"}),"."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["You have now added a Semgrep job to GitHub Actions. A ",(0,t.jsx)(n.strong,{children:"full scan"})," begins automatically after adding a new repository. Its findings are sent to Semgrep AppSec Platform for triage and remediation."]}),(0,t.jsx)(n.h3,{id:"detecting-github-repositories",children:"Detecting GitHub repositories"}),(0,t.jsx)(c,{})]}),(0,t.jsx)(u.A,{value:"other",children:(0,t.jsx)(l,{})})]}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.p,{children:["You can edit your configuration files to send findings to ",(0,t.jsx)(n.strong,{children:"GitHub Advanced Security Dashboard (GHAS)"})," and ",(0,t.jsx)(n.strong,{children:"GitLab SAST Dashboard"}),". Refer to the following samples:"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/semgrep-ci/sample-ci-configs/#upload-findings-to-github-advanced-security-dashboard",children:"GitHub Advanced Security Dashboard"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/semgrep-ci/sample-ci-configs/#upload-findings-to-gitlab-security-dashboard",children:"GitLab SAST Dashboard"})}),"\n"]})]}),"\n",(0,t.jsx)(n.h3,{id:"sample-ci-configuration-snippets",children:"Sample CI configuration snippets"}),"\n",(0,t.jsx)(n.p,{children:"Refer to the following table for links to sample CI configuration snippets:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"In-app CI provider"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"Sample CI configuration snippet"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"GitHub Actions"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.a,{href:"/semgrep-ci/sample-ci-configs/#github-actions",children:(0,t.jsx)(n.code,{children:"semgrep.yml"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"GitLab CI/CD"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.a,{href:"/semgrep-ci/sample-ci-configs/#gitlab-cicd",children:(0,t.jsx)(n.code,{children:".gitlab-ci.yml"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Jenkins"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.a,{href:"/semgrep-ci/sample-ci-configs/#jenkins",children:(0,t.jsx)(n.code,{children:"Jenkinsfile"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Bitbucket Pipelines"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.a,{href:"/semgrep-ci/sample-ci-configs/#bitbucket-pipelines",children:(0,t.jsx)(n.code,{children:"bitbucket-pipelines.yml"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"CircleCI"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.a,{href:"/semgrep-ci/sample-ci-configs/#circleci",children:(0,t.jsx)(n.code,{children:"config.yml"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Buildkite"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.a,{href:"/semgrep-ci/sample-ci-configs/#buildkite",children:(0,t.jsx)(n.code,{children:"pipelines.yml"})})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"Azure Pipelines"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:(0,t.jsx)(n.a,{href:"/semgrep-ci/sample-ci-configs/#azure-pipelines",children:(0,t.jsx)(n.code,{children:"azure-pipelines.yml"})})})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"data-collected-by-semgrep",children:"Data collected by Semgrep"}),"\n",(0,t.jsx)(n.p,{children:"When running in CI, Semgrep runs fully in the CI build environment. Unless you have explicitly granted code access to Semgrep, your code is not sent anywhere."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Semgrep collects ",(0,t.jsx)(n.a,{href:"/semgrep-ci/findings-ci",children:"findings data"}),", which includes the line number of the code match, but not the code. It is hashed using a one-way hashing function."]}),"\n",(0,t.jsx)(n.li,{children:"Findings data is used to generate line-specific hyperlinks to your source code management system and support other Semgrep functions."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"delete-a-project",children:"Delete a project"}),"\n",(0,t.jsx)(n.p,{children:"Deleting a project removes all of its findings, metadata, and other records from Semgrep AppSec Platform."}),"\n",(0,t.jsx)(g,{}),"\n",(0,t.jsx)(n.h2,{id:"scan-scope",children:"Scan scope"}),"\n",(0,t.jsx)(p.Ay,{}),"\n",(0,t.jsx)(n.h3,{id:"default-branch-names",children:"Default branch names"}),"\n",(0,t.jsxs)(n.p,{children:["When you add a Semgrep CI job to your repository for the first time, Semgrep performs a full scan on the primary, or default, branches. In many cases, Semgrep automatically detects these branches as primary branches. However, you can also ",(0,t.jsx)(n.a,{href:"/deployment/primary-branch",children:"set the primary branch name"}),". This is useful for repositories with unique names. This lets Semgrep know what branch to prioritize and perform full scans on."]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,t.jsx)(d.Ay,{opening_phrase:"For Jenkins users: Set up a separate CI job for diff-aware scans for"})]})}function v(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(b,{...e})}):b(e)}},91224:(e,n,r)=>{r.d(n,{Ay:()=>l,RM:()=>i});var s=r(74848),t=r(28453);const i=[];function o(e){const n={a:"a",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"You've set up Semgrep to scan in your repository and send findings after each scan. Your core deployment is almost complete."}),"\n",(0,s.jsx)(n.p,{children:"Remaining steps include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Optional: ",(0,s.jsxs)(n.a,{href:"/deployment/customize-ci-jobs",children:[(0,s.jsx)("i",{class:"fa-regular fa-file-lines"})," Customize your CI job"]}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["For software composition analysis (SCA) scans using ",(0,s.jsx)(n.strong,{children:"Jenkins or Maven"}),": ",(0,s.jsxs)(n.a,{href:"/semgrep-supply-chain/setup-infrastructure",children:[(0,s.jsx)("i",{class:"fa-regular fa-file-lines"})," Set up SCA scans for your infrastructure."]})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)("span",{children:e.opening_phrase})," ",(0,s.jsx)("strong",{children:"feature branches"})," (non-trunk branches) when a pull request or merge request is open. This is a prerequisite to receiving PR or MR comments. See ",(0,s.jsx)("a",{href:"/docs/deployment/customize-ci-jobs#set-up-diff-aware-scans",children:"Set up diff-aware scans"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Set up ",(0,s.jsx)(n.strong,{children:"PR or MR comments"}),", which post findings to developers in your SCM. This involves developers in the security process as active participants. See ",(0,s.jsxs)(n.a,{href:"/category/pr-or-mr-comments",children:[(0,s.jsx)("i",{class:"fa-regular fa-file-lines"})," PR or MR comments"]})," for next steps."]}),"\n"]})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);