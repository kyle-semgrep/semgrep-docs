"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[43788],{28453:(e,t,o)=>{o.d(t,{R:()=>l,x:()=>n});var s=o(96540);const i={},r=s.createContext(i);function l(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function n(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:t},e.children)}},80484:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>n,default:()=>g,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"kb/semgrep-ci/collect-gitlab-logs","title":"GitLab \\"Job\'s log exceeded limit\\" error","description":"Collect verbose logs from GitLab to troubleshoot Semgrep CI scans.","source":"@site/docs/kb/semgrep-ci/collect-gitlab-logs.md","sourceDirName":"kb/semgrep-ci","slug":"/kb/semgrep-ci/collect-gitlab-logs","permalink":"/semgrep-docs/kb/semgrep-ci/collect-gitlab-logs","draft":false,"unlisted":false,"editUrl":"https://github.com/kyle-semgrep/semgrep-docs/edit/main/docs/kb/semgrep-ci/collect-gitlab-logs.md","tags":[{"inline":true,"label":"GitLab","permalink":"/semgrep-docs/tags/git-lab"},{"inline":true,"label":"Semgrep in CI","permalink":"/semgrep-docs/tags/semgrep-in-ci"}],"version":"current","lastUpdatedAt":1752260268000,"frontMatter":{"description":"Collect verbose logs from GitLab to troubleshoot Semgrep CI scans.","tags":["GitLab","Semgrep in CI"]},"sidebar":"kbSidebar","previous":{"title":"Collecting Semgrep GitHub Actions logs from GitHub","permalink":"/semgrep-docs/kb/semgrep-ci/collect-gha-logs"},"next":{"title":"Failed to run a git command during a pull request or merge request scan","permalink":"/semgrep-docs/kb/semgrep-ci/git-command-errors"}}');var i=o(74848),r=o(28453);const l={description:"Collect verbose logs from GitLab to troubleshoot Semgrep CI scans.",tags:["GitLab","Semgrep in CI"]},n='GitLab "Job\'s log exceeded limit" error',c={},a=[{value:"Solution: Save the log as an artifact",id:"solution-save-the-log-as-an-artifact",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"gitlab-jobs-log-exceeded-limit-error",children:'GitLab "Job\'s log exceeded limit" error'})}),"\n",(0,i.jsxs)(t.p,{children:["When executing a GitLab job that collects verbose (",(0,i.jsx)(t.code,{children:"-v"}),") or debug (",(0,i.jsx)(t.code,{children:"--debug"}),")\nlogs from Semgrep, you may see the following error message:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-console",children:"Job's log exceeded limit of 4194304 bytes.\nJob execution will continue but no more output will be collected.\n"})}),"\n",(0,i.jsx)(t.p,{children:"GitLab normally limits CI job logs to around 4 MB in size, and verbose Semgrep logs can exceed this size limit, leading to the error."}),"\n",(0,i.jsx)(t.h2,{id:"solution-save-the-log-as-an-artifact",children:"Solution: Save the log as an artifact"}),"\n",(0,i.jsxs)(t.p,{children:["You can save larger log files ",(0,i.jsxs)(t.a,{href:"https://docs.gitlab.com/ee/ci/jobs/job_artifacts.html",children:["using ",(0,i.jsx)(t.code,{children:"artifacts"})," to create a job artifact"]})," from the log file."]}),"\n",(0,i.jsx)(t.p,{children:"To do that:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Update the ",(0,i.jsx)(t.code,{children:"semgrep ci"})," command to redirect logs to a file: ",(0,i.jsx)(t.code,{children:"semgrep ci --debug &> semgrep.log"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:["Add the resulting log file to the ",(0,i.jsx)(t.code,{children:"artifacts"})," section of the CI configuration."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Here is an example based on the ",(0,i.jsx)(t.a,{href:"/docs/semgrep-ci/sample-ci-configs/#sample-gitlab-cicd-configuration-snippet",children:"sample GitLab CI/CD configuration"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yml",children:"semgrep:\n  image: semgrep/semgrep\n  script:\n    - semgrep ci --debug &> semgrep.log\n  rules:\n    - if: $CI_MERGE_REQUEST_IID\n    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH\n  variables:\n    SEMGREP_APP_TOKEN: $SEMGREP_APP_TOKEN\n  artifacts:\n    paths:\n      - semgrep.log\n    when: always\n"})}),"\n",(0,i.jsxs)(t.p,{children:["You can ",(0,i.jsx)(t.a,{href:"https://docs.gitlab.com/ee/ci/jobs/job_artifacts.html#download-job-artifacts",children:"download the full log"}),' from several locations, including the "Job artifacts" area in the job.']})]})}function g(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);