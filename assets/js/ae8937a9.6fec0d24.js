"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[53528],{28453:(e,s,r)=>{r.d(s,{R:()=>i,x:()=>a});var n=r(96540);const o={},t=n.createContext(o);function i(e){const s=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(t.Provider,{value:s},e.children)}},44237:(e,s,r)=>{r.d(s,{A:()=>n});const n=r.p+"assets/images/projects-remote-local-slugs-4beb1db84ef0f39a108f53fa9b857f51.png"},66232:(e,s,r)=>{r.d(s,{A:()=>n});const n=r.p+"assets/images/findings-with-hyperlinks-164fb7867c050d835e1b650ce94d2494.png"},98616:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"deployment/local-to-scp-scans","title":"Upload local scan findings","description":"Send your local scans to Semgrep AppSec Platform to view and track your findings.","source":"@site/docs/deployment/local-to-scp-scans.md","sourceDirName":"deployment","slug":"/deployment/local-to-scp-scans","permalink":"/semgrep-docs/deployment/local-to-scp-scans","draft":false,"unlisted":false,"editUrl":"https://github.com/kyle-semgrep/semgrep-docs/edit/main/docs/deployment/local-to-scp-scans.md","tags":[{"inline":true,"label":"Semgrep AppSec Platform","permalink":"/semgrep-docs/tags/semgrep-app-sec-platform"}],"version":"current","lastUpdatedAt":1752260268000,"frontMatter":{"slug":"local-to-scp-scans","title":"Upload local scan findings","hide_title":true,"description":"Send your local scans to Semgrep AppSec Platform to view and track your findings.","tags":["Semgrep AppSec Platform"]},"sidebar":"scanSidebar","previous":{"title":"Update Semgrep","permalink":"/semgrep-docs/update"},"next":{"title":"Troubleshooting the CLI","permalink":"/semgrep-docs/troubleshooting/semgrep"}}');var o=r(74848),t=r(28453);const i={slug:"local-to-scp-scans",title:"Upload local scan findings",hide_title:!0,description:"Send your local scans to Semgrep AppSec Platform to view and track your findings.",tags:["Semgrep AppSec Platform"]},a="Scan local repositories and upload findings",l={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Best practices",id:"best-practices",level:2},{value:"Send findings from local repository scan to Semgrep AppSec Platform",id:"send-findings-from-local-repository-scan-to-semgrep-appsec-platform",level:2},{value:"Project separation between local and remote repositories",id:"project-separation-between-local-and-remote-repositories",level:2},{value:"Link local scans to their remote repositories",id:"link-local-scans-to-their-remote-repositories",level:2},{value:"Sample values",id:"sample-values",level:3}];function p(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"scan-local-repositories-and-upload-findings",children:"Scan local repositories and upload findings"})}),"\n",(0,o.jsxs)(s.p,{children:["You can send findings (scan results) from a local repository to Semgrep AppSec Platform. The local repository is a separate ",(0,o.jsx)(s.strong,{children:"project"})," from its remote counterpart. This is useful for testing rules and policies, or simply scanning your own work before it is merged to your organization's trunk branch."]}),"\n",(0,o.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Locally installed ",(0,o.jsx)(s.code,{children:"semgrep"}),"."]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,o.jsxs)(s.p,{children:["You can keep your local scans private and separate from your team by creating a Semgrep organization with only a single user. This is a ",(0,o.jsx)(s.strong,{children:"personal"})," org, similar to a personal account in your source code manager (SCM). This separation ensures that your findings data does not affect organizational records and trends."]}),"\n",(0,o.jsxs)(s.p,{children:["To create an org, perform the steps in ",(0,o.jsx)(s.a,{href:"/deployment/create-account-and-orgs/#create-additional-orgs",children:"Create additional orgs"}),". You don't need to perform any other steps."]}),"\n",(0,o.jsx)(s.h2,{id:"send-findings-from-local-repository-scan-to-semgrep-appsec-platform",children:"Send findings from local repository scan to Semgrep AppSec Platform"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["Ensure that you are signed into Semgrep AppSec Platform and you've switched to the org you want to send findings to. It is recommended to send local repository findings to your ",(0,o.jsx)(s.strong,{children:"personal"})," org."]}),"\n",(0,o.jsxs)(s.li,{children:["In your CLI, log in to Semgrep:","\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"semgrep login\n"})}),"\n"]}),"\n",(0,o.jsx)(s.li,{children:"Click the login URL provided, or copy and paste it into your browser's address bar. Your are taken to your web browser to complete the login process."}),"\n",(0,o.jsx)(s.li,{children:"Follow any additional steps."}),"\n",(0,o.jsxs)(s.li,{children:["After logging in, start a scan in your CLI:","\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"semgrep ci\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"project-separation-between-local-and-remote-repositories",children:"Project separation between local and remote repositories"}),"\n",(0,o.jsxs)(s.p,{children:["The project slug for a ",(0,o.jsx)(s.strong,{children:"remote repository"})," takes the form ",(0,o.jsx)("code",{class:"placeholder",children:"ACCOUNT-NAME/REPOSITORY_NAME."})]}),"\n",(0,o.jsxs)(s.p,{children:["The project slug for a ",(0,o.jsx)(s.strong,{children:"local repository"})," takes the form ",(0,o.jsxs)("code",{children:["local_scan/",(0,o.jsx)("span",{class:"placeholder",children:"REPOSITORY-NAME"})]}),"."]}),"\n",(0,o.jsx)(s.p,{children:"Refer to the following image for an example of both remote and local Projects in a single personal account."}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{alt:"Projects view with local and remote counterparts of the same repository.",src:r(44237).A+"",width:"1817",height:"376"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"For personal orgs:"})," A local repository scan does ",(0,o.jsx)(s.strong,{children:"not"})," overwrite the findings records of its remote counterpart. They are two separate projects. Personal accounts only have one team member or user: you."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"For organization orgs"}),": A local repository scan does ",(0,o.jsx)(s.strong,{children:"not"})," overwrite findings records of its remote counterpart. However, if two members have both cloned the same local repository, such as ",(0,o.jsx)(s.code,{children:"RepoA"}),", and both send local ",(0,o.jsx)(s.code,{children:"RepoA"})," findings, one set of findings may overwrite other unintentionally. This is because orgs can have more than one team member, but all local scans are sent to the same project slug."]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"link-local-scans-to-their-remote-repositories",children:"Link local scans to their remote repositories"}),"\n",(0,o.jsxs)(s.p,{children:["When sending findings from local repositories to Semgrep AppSec Platform, the links shown on the ",(0,o.jsx)(s.strong,{children:"Findings"})," page are not generated. They may be missing, or they may not link to the correct file. This is because the scan was performed on your local repository, not remote."]}),"\n",(0,o.jsx)(s.p,{children:"You can optionally set up cross-linking between local and remote repositories to create the correct hyperlinks. To do so, set up environment variables through the CLI:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:"Navigate to the root of your repository."}),"\n",(0,o.jsxs)(s.li,{children:["Create the ",(0,o.jsx)(s.code,{children:"SEMGREP_REPO_URL"})," variable, setting it to the URL you'd use to access your online repository:\n",(0,o.jsxs)("pre",{children:["export SEMGREP_REPO_URL=",(0,o.jsx)("span",{className:"placeholder",children:"URL_ADDRESS"})]})]}),"\n",(0,o.jsxs)(s.li,{children:["Create the ",(0,o.jsx)(s.code,{children:"SEMGREP_BRANCH"})," variable:","\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["Retrieve the branch name:\n",(0,o.jsx)("pre",{children:"git rev-parse --abbrev-ref HEAD"})]}),"\n",(0,o.jsxs)(s.li,{children:["Set the variable as shown, making sure that you replace the ",(0,o.jsx)("code",{children:(0,o.jsx)("span",{className:"placeholder",children:"BRANCH_NAME"})})," placeholder:\n",(0,o.jsxs)("pre",{children:["export SEMGREP_BRANCH=",(0,o.jsx)("span",{className:"placeholder",children:"BRANCH_NAME"})]})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["Create the ",(0,o.jsx)(s.code,{children:"SEMGREP_REPO_NAME"})," variable, setting it to the name of your repository:\n",(0,o.jsxs)("pre",{children:["export SEMGREP_REPO_NAME=",(0,o.jsx)("span",{className:"placeholder",children:"REPO_NAME"})]})]}),"\n",(0,o.jsxs)(s.li,{children:["Create the ",(0,o.jsx)(s.code,{children:"SEMGREP_COMMIT"})," variable:","\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["Retrieve the commit hash:\n",(0,o.jsx)("pre",{children:"git log -n 1"})]}),"\n",(0,o.jsxs)(s.li,{children:["Set the variable by entering the text below, substituting ",(0,o.jsx)("code",{children:(0,o.jsx)("span",{className:"placeholder",children:"COMMIT_HASH"})})," with the value from the previous step.\n",(0,o.jsxs)("pre",{children:["export SEMGREP_COMMIT=",(0,o.jsx)("span",{className:"placeholder",children:"COMMIT_HASH"})]})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"After performing these steps, rescan your repository to correctly generate links in Semgrep AppSec Platform."}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.img,{alt:"Findings page snippet with hyperlinks",src:r(66232).A+"",title:"Findings page snippet with hyperlinks",width:"1200",height:"639"}),"\n",(0,o.jsx)(s.strong,{children:"Figure."})," Findings page with hyperlinks."]}),"\n",(0,o.jsx)(s.h3,{id:"sample-values",children:"Sample values"}),"\n",(0,o.jsx)(s.p,{children:"The following is an example of the variables you'd need to create to generate links in Semgrep AppSec Platform, along with sample values:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-console",children:"# Set the repository URL\nexport SEMGREP_REPO_URL=https://github.com/corporation/s_juiceshop\n\n# Set the repository name\nexport SEMGREP_REPO_NAME=corporation/s_juiceshop\n\n# Retrieve the branch\ngit rev-parse --abbrev-ref HEAD\ns_update\n\n# Set the branch\nexport SEMGREP_BRANCH=s_update\n\n# Retrieve the commit hash\ngit log -n 1\ncommit fa4e36b9369e5b039bh2220b5h9R61a38b077f29 (HEAD -> s_juiceshop, origin/main, origin/HEAD, master)\n\n# Set the commit hash\nexport SEMGREP_COMMIT=fa4e36b9369e5b039bh2220b5h9R61a38b077f29\n"})})]})}function d(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}}}]);