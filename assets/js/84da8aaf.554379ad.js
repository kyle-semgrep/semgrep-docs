"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[32146],{28453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>t});var r=n(96540);const o={},l=r.createContext(o);function c(e){const s=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),r.createElement(l.Provider,{value:s},e.children)}},37575:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>t,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>i});const r=JSON.parse('{"id":"for-developers/developer-local-scans","title":"Run local CLI scans","description":"Run local Semgrep CLI scans.","source":"@site/docs/for-developers/developer-local-scans.md","sourceDirName":"for-developers","slug":"/for-developers/cli","permalink":"/docs/for-developers/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/kyle-semgrep/semgrep-docs/edit/main/docs/for-developers/developer-local-scans.md","tags":[{"inline":true,"label":"Semgrep AppSec Platform","permalink":"/docs/tags/semgrep-app-sec-platform"}],"version":"current","lastUpdatedAt":1752252315000,"frontMatter":{"slug":"/for-developers/cli","title":"Run local CLI scans","hide_title":true,"description":"Run local Semgrep CLI scans.","tags":["Semgrep AppSec Platform"]},"sidebar":"devSidebar","previous":{"title":"Resolve findings through the Semgrep web app","permalink":"/docs/for-developers/resolve-findings-through-app"},"next":{"title":"Run IDE scans","permalink":"/docs/for-developers/ide"}}');var o=n(74848),l=n(28453);const c={slug:"/for-developers/cli",title:"Run local CLI scans",hide_title:!0,description:"Run local Semgrep CLI scans.",tags:["Semgrep AppSec Platform"]},t="Run local CLI scans",a={},i=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Best practices",id:"best-practices",level:2},{value:"Common Semgrep commands",id:"common-semgrep-commands",level:2},{value:"<code>semgrep scan</code>",id:"semgrep-scan",level:3},{value:"Test a custom rule",id:"test-a-custom-rule",level:4},{value:"<code>semgrep ci</code>",id:"semgrep-ci",level:3}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"run-local-cli-scans",children:"Run local CLI scans"})}),"\n",(0,o.jsx)(s.p,{children:"You can run local Semgrep CLI scans with the Semgrep command-line tool."}),"\n",(0,o.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"An existing Semgrep org account."}),"\n",(0,o.jsx)(s.li,{children:"Semgrep CLI tool installed in your local machine."}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,o.jsx)(s.p,{children:"It's best to run the following command for local scans:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"semgrep ci --dry-run\n"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["The command ",(0,o.jsx)(s.code,{children:"semgrep ci"})," tells Semgrep to use your organization's chosen analyses and rules for the scan."]}),"\n",(0,o.jsxs)(s.li,{children:["The ",(0,o.jsx)(s.code,{children:"--dry-run"})," flag ensures that your scans are not uploaded to the Semgrep web app. This is recommended because your code could be a work in progress, subject to change, whereas code uploaded as a PR or MR usually indicates the code is ready for review."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["When Semgrep performs a CLI or IDE scan, it presents findings from ",(0,o.jsx)(s.strong,{children:"all rules"})," that your AppSec team uses. For this reason, you may encounter ",(0,o.jsx)(s.strong,{children:"more false positive or low severity findings"})," that you can ignore."]}),"\n",(0,o.jsx)(s.h2,{id:"common-semgrep-commands",children:"Common Semgrep commands"}),"\n",(0,o.jsx)(s.h3,{id:"semgrep-scan",children:(0,o.jsx)(s.code,{children:"semgrep scan"})}),"\n",(0,o.jsx)(s.p,{children:"The following command runs a local scan with Semgrep's open source Community Edition (CE) using pre-selected rules for a variety of languages:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"semgrep scan\n"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"semgrep scan"})," does not take into account your organization's settings."]}),"\n",(0,o.jsxs)(s.li,{children:["You do ",(0,o.jsx)(s.strong,{children:"not"})," need to be logged in to run a scan."]}),"\n",(0,o.jsx)(s.li,{children:"It only runs lightweight SAST analyses."}),"\n",(0,o.jsx)(s.li,{children:"It does not run other Semgrep products, such as Secrets or Supply Chain."}),"\n"]}),"\n",(0,o.jsx)(s.admonition,{type:"caution",children:(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"semgrep scan"})," does not run the same analyses as ",(0,o.jsx)(s.code,{children:"semgrep ci"})," so you may have a higher rate of false positives."]}),"\n",(0,o.jsxs)(s.li,{children:["You can run ",(0,o.jsx)(s.code,{children:"semgrep scan --pro"})," to run advanced SAST analyses with no other Semgrep products."]}),"\n"]})}),"\n",(0,o.jsx)(s.h4,{id:"test-a-custom-rule",children:"Test a custom rule"}),"\n",(0,o.jsxs)(s.p,{children:["You can test a custom rule by creating a test file. See ",(0,o.jsx)(s.a,{href:"/writing-rules/testing-rules",children:"Testing rules"}),"."]}),"\n",(0,o.jsx)(s.p,{children:"After you've tested your custom rule, you can try it on your codebase locally:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["Ensure that you're signed in to Semgrep from the CLI by entering ",(0,o.jsx)(s.code,{children:"semgrep login"}),". If you have successfully signed in, you should see ",(0,o.jsx)(s.strong,{children:"API token already exists"})," or a similar message."]}),"\n",(0,o.jsxs)(s.li,{children:["Enter the following command:","\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"semgrep scan --pro --config [CUSTOM_RULE].yaml\n"})}),"\n","Replace ",(0,o.jsx)(s.code,{children:"CUSTOM_RULE.yaml"})," with the name of your custom rule."]}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"semgrep-ci",children:(0,o.jsx)(s.code,{children:"semgrep ci"})}),"\n",(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"semgrep ci"})," command, without any flags, sends the results of your scan to Semgrep AppSec Platform with the slug ",(0,o.jsx)(s.code,{children:"local-scan/PROJECT_NAME"}),". When using this command in a team setting, ensure that you are aware of its risks and that your team members are aware that you're uploading the results of local scans."]})]})}function u(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);