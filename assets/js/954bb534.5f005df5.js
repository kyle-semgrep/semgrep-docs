"use strict";(self.webpackChunkmegadocs=self.webpackChunkmegadocs||[]).push([[88165],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var s=i(96540);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},32298:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var s=i(93705),t=i(74848),r=i(28453);const o={slug:"july-2022",append_help_link:!0,hide_title:!0,description:"Release notes include the changes, fixes, and additions in specific versions of Semgrep.",toc_max_heading_level:3,tags:["Release notes"],hide_table_of_contents:!1,date:"2022-07-30T10:00",title:"July 2022"},a="July 2022",l={authorsImageUrls:[]},d=[{value:"Semgrep App",id:"semgrep-app",level:2},{value:"Additions",id:"additions",level:3},{value:"Changes",id:"changes",level:3},{value:"Semgrep CLI",id:"semgrep-cli",level:2},{value:"Additions",id:"additions-1",level:3},{value:"Changes",id:"changes-1",level:3},{value:"Additional information",id:"additional-information",level:4}];function c(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"The following updates were made to Semgrep in July 2022."}),"\n",(0,t.jsx)(n.h2,{id:"semgrep-app",children:"Semgrep App"}),"\n",(0,t.jsx)(n.h3,{id:"additions",children:"Additions"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Semgrep App now integrates with Slack through a Slack app. To create a new integration, go to ",(0,t.jsx)(n.strong,{children:"Settings"})," > ",(0,t.jsx)(n.strong,{children:"Integrations"})," > ",(0,t.jsx)(n.strong,{children:"Add Integration"})," > ",(0,t.jsx)(n.strong,{children:"Slack"}),". Previously, Semgrep App used Slack webhooks."]}),"\n",(0,t.jsxs)(n.li,{children:["Enable autofix for all of your Projects (repositories connected to Semgrep App) by clicking on ",(0,t.jsx)(n.strong,{children:"Settings"})," > ",(0,t.jsx)(n.strong,{children:"Deployment"})," > ",(0,t.jsx)(n.strong,{children:"Autofix"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"changes",children:"Changes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Clicking on the Project Name in the Projects page now takes you to that project's Findings page. Click the ",(0,t.jsx)("i",{class:"fa-solid fa-gear"})," ",(0,t.jsx)(n.strong,{children:"gear"})," icon at the end of the Project's row to go to the project's Settings page."]}),"\n",(0,t.jsx)(n.li,{children:"Semgrep App detects additional environment variables depending on your provider. This simplifies the creation and committing of the configuration file when adding a new Project (repository) in Semgrep App."}),"\n",(0,t.jsxs)(n.li,{children:["UI and UX improvements to ",(0,t.jsx)(n.strong,{children:"Scan new project"})," workflow."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"semgrep-cli",children:"Semgrep CLI"}),"\n",(0,t.jsx)(n.p,{children:"These release notes include upgrades for all versions ranging between 0.102.0 and 0.107.0."}),"\n",(0,t.jsx)(n.h3,{id:"additions-1",children:"Additions"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Semgrep in CI:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Fail-open support: Added ",(0,t.jsx)(n.code,{children:"--suppress-errors"})," and ",(0,t.jsx)(n.code,{children:"--no-suppress-errors"})," (the default is ",(0,t.jsx)(n.code,{children:"--suppress-errors"}),"). See ",(0,t.jsx)(n.a,{href:"/semgrep-ci/configuring-blocking-and-errors-in-ci",children:"Configuring blocking findings and errors"})," for more information."]}),"\n",(0,t.jsx)(n.li,{children:"Semgrep in CI does not block builds on triage ignored issues."}),"\n",(0,t.jsxs)(n.li,{children:["The timeout for Git commands Semgrep runs is now configurable. To configure the timeout, set the ",(0,t.jsx)(n.code,{children:"SEMGREP_GIT_COMMAND_TIMEOUT"})," environment variable. The time unit used as a value for this key is in seconds. The default value is ",(0,t.jsx)(n.code,{children:"300"})," which represents 5 minutes."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"SEMGREP_GHA_MIN_FETCH_DEPTH"})," environment variable lets you set how many commits ",(0,t.jsx)(n.code,{children:"semgrep ci"})," fetches from the remote at the minimum when calculating the merge-base in GitHub Actions. Having more commits available helps Semgrep determine what changes came from the current pull request, fixing issues where Semgrep would otherwise report findings that were not touched in a given pull request. This value is set to 0 by default. (Issue ",(0,t.jsx)(n.a,{href:"https://github.com/semgrep/semgrep/pull/5664",children:"#5664"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"cli/scripts/compare.py"})," to compare rules for different versions of Semgrep is now supported on Podman environments. For more information, see ",(0,t.jsx)(n.a,{href:"/contributing/contributing-to-semgrep-rules-repository",children:"Contributing rules"})," documentation."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Extract mode:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["New Semgrep CLI experimental extract mode. This mode runs a Semgrep rule on a codebase and extracts code from matches, treating it as a different language. This allows you to supplement an existing set of rules, for example, by writing additional rules to find JavaScript in files of a different language than JavaScript. Among many possible use cases, this enables you to write rules for HTML code in JavaScript code or in template files. While this is somewhat possible with ",(0,t.jsx)(n.code,{children:"metavariable-pattern"}),", this reduces the work from an M * N problem to an M + N. To know more about extract mode, see ",(0,t.jsx)(n.a,{href:"/writing-rules/experiments/deprecated-experiments#extract-mode",children:"Extract mode"})," documentation."]}),"\n",(0,t.jsxs)(n.li,{children:["Extract mode now has a concatenation reduction (",(0,t.jsx)(n.code,{children:"concat"}),"). Disjoint snippets within a file can be treated as one unified file."]}),"\n",(0,t.jsxs)(n.li,{children:["You can use extract mode to scan for generic languages (use value ",(0,t.jsx)(n.code,{children:"generic"})," in ",(0,t.jsx)(n.code,{children:"dest-language"}),")."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Taint mode:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Add experimental support for ",(0,t.jsx)(n.em,{children:"taint labels"}),", which is the ability to attach labels to different kinds of taint. Both sources and sinks can restrict what labels are present in the data that passes through them in order to apply. This allows you to write more complex taint rules that previously required unappealing workarounds. Taint labels are also helpful for writing certain classes of typestate analyses (for example, check that a file descriptor is not used after being closed)."]}),"\n",(0,t.jsxs)(n.li,{children:["Introduced the ",(0,t.jsx)(n.code,{children:"--dataflow-traces"})," flag, which directs the Semgrep CLI to explain how non-local values lead to a finding. Currently, this only applies to taint mode findings and it traces the path from the taint source to the taint sink."]}),"\n",(0,t.jsx)(n.li,{children:"Added taint traces as part of Semgrep JSON output. This helps explain how the sink became tainted."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"General and language support additions:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Semgrep has an experimental support for ",(0,t.jsx)(n.strong,{children:"Elixir"})," language!"]}),"\n",(0,t.jsxs)(n.li,{children:["Scala: Ellipsis are now allowed in for loop function headers, allowing you to write patterns such as ",(0,t.jsx)(n.code,{children:"for (...; $X <- $Y if $COND; ...) { ... }"})," to match nested for loops. (Issue ",(0,t.jsx)(n.a,{href:"https://github.com/semgrep/semgrep/issues/5650",children:"#5650"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Kotlin: Support for ellipsis in field access (for example, ",(0,t.jsx)(n.code,{children:"obj. ... .bar()"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["For users logged-in under ",(0,t.jsx)(n.code,{children:"semgrep login"})," while using Semgrep App. Semgrep now reports file extensions from App-connected scans that do ",(0,t.jsx)(n.strong,{children:"not"})," match the language of any enabled rule. This addition can make the development of new rules more effective by improving language prioritization."]}),"\n",(0,t.jsxs)(n.li,{children:["Previously, expression statement patterns (for example ",(0,t.jsx)(n.code,{children:"foo();"}),") were always matching when the expression statement was a bit deeper in the expression (for example, ",(0,t.jsx)(n.code,{children:"x = foo();"}),"). This default behavior can now be disabled through rule ",(0,t.jsx)(n.code,{children:"options:"})," with ",(0,t.jsx)(n.code,{children:"implicit_deep_exprstmt: false"})," in rules YAML file. (Issue ",(0,t.jsx)(n.a,{href:"https://github.com/semgrep/semgrep/issues/5472",children:"#5472"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["LSP support: Improving ",(0,t.jsx)(n.strong,{children:"experimental"})," Language Server Protocol (LSP) support for metavariable inlay hints, hot reloading, App integration, scan commands, and much more!"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"changes-1",children:"Changes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Breaking changes in the ",(0,t.jsx)(n.code,{children:"dataflow_trace"})," JSON output to make it more easily consumable by Semgrep App. Added content for ",(0,t.jsx)(n.code,{children:"taint_source"})," and ",(0,t.jsx)(n.code,{children:"intermediate_vars"}),", and collapsed the multiple ",(0,t.jsx)(n.code,{children:"taint_source"})," locations into one."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"General performance improvements:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Semgrep significantly reduced its memory consumption in large repositories!"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"metavariable-comparison:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"metavariable-comparison"})," allows you to strip ",(0,t.jsx)(n.code,{children:"'"}),", ",(0,t.jsx)(n.code,{children:'"'}),", and ",(0,t.jsx)(n.code,{children:"`"})," from the metavariable content, enabling you to scan for strings containing integer or float data. See ",(0,t.jsx)(n.a,{href:"/writing-rules/rule-syntax#metavariable-comparison",children:"metavariable-comparison"})," documentation to get more information. With this update, the ",(0,t.jsx)(n.code,{children:"metavariable"})," field is now only required for ",(0,t.jsx)(n.code,{children:"strip: true"}),". You are no longer required to include the ",(0,t.jsx)(n.code,{children:"metavariable"})," field for the default ",(0,t.jsx)(n.code,{children:"strip: false"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"metavariable-comparison"})," now also works on metavariables that cannot be evaluated as simple literals. In such cases, Semgrep takes the string representation of the code bound by the metavariable. Use this string representation through ",(0,t.jsx)(n.code,{children:"str($MVAR)"}),". For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"- metavariable-comparison:\n    metavariable: $X\n    comparison: str($X) == str($Y)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In this example, ",(0,t.jsx)(n.code,{children:"$X"})," and ",(0,t.jsx)(n.code,{children:"$Y"})," can bind to two different code variables and Semgrep checks whether these two code variables have the same name (for example two different variables but both named ",(0,t.jsx)(n.code,{children:"x"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"metavariable-pattern:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Metavariable-pattern now uses the same metavariable context as its parent. This can cause breaking changes for rules that reuse metavariables in the pattern. For example, consider the following formula:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"- patterns:\n   - pattern-either:\n       - pattern-inside: $OBJ.output($RESP)\n   - pattern: $RESP\n   - metavariable-pattern:\n       metavariable: $RESP\n       pattern: `...{ $OBJ }...`\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Previously, the ",(0,t.jsx)(n.code,{children:"$OBJ"})," in the metavariable-pattern was a new metavariable. The formula behaved the same if that ",(0,t.jsx)(n.code,{children:"$OBJ"})," was ",(0,t.jsx)(n.code,{children:"$A"})," instead. Now, ",(0,t.jsx)(n.code,{children:"$OBJ"})," unifies with the value bound by ",(0,t.jsx)(n.code,{children:"$OBJ"})," in the pattern-inside."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Using the ellipses operator in XML or HTML elements is now more permissive of whitespace. Previously, in order to have an element with an ellipsis no leading or trailing whitespace was permitted in the element contents, for example ",(0,t.jsx)(n.code,{children:"<tag>...</tag>"})," was the only permitted form. Now, leading or trailing whitespace is ignored when the substantive content of the element is only an ellipsis."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--verbose"})," no longer displays timing information, use ",(0,t.jsx)(n.code,{children:"--verbose --time"})," to display the timing."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"semgrep --test"})," output produced expected lines and reported lines that were difficult to read and interpret. This change introduces missed and incorrect lines making it easier to see the differences in output. See more information about the ",(0,t.jsx)(n.code,{children:"semgrep --test"})," in the ",(0,t.jsx)(n.a,{href:"/writing-rules/testing-rules",children:"Testing rules"})," documentation."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"additional-information",children:"Additional information"}),"\n",(0,t.jsxs)(n.p,{children:["Bug fixes are not included in the release notes unless they are potentially breaking your workflow. To see the complete change notes for Semgrep CLI and CI that include fixes, visit the ",(0,t.jsx)(n.a,{href:"https://github.com/semgrep/semgrep/releases/",children:"Semgrep changelog"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},93705:e=>{e.exports=JSON.parse('{"permalink":"/semgrep-docs/release-notes/july-2022","source":"@site/release-notes/july-2022.md","title":"July 2022","description":"Release notes include the changes, fixes, and additions in specific versions of Semgrep.","date":"2022-07-30T10:00:00.000Z","tags":[{"inline":true,"label":"Release notes","permalink":"/semgrep-docs/release-notes/tags/release-notes"}],"readingTime":6.22,"hasTruncateMarker":true,"authors":[],"frontMatter":{"slug":"july-2022","append_help_link":true,"hide_title":true,"description":"Release notes include the changes, fixes, and additions in specific versions of Semgrep.","toc_max_heading_level":3,"tags":["Release notes"],"hide_table_of_contents":false,"date":"2022-07-30T10:00","title":"July 2022"},"unlisted":false,"prevItem":{"title":"August 2022","permalink":"/semgrep-docs/release-notes/august-2022"},"nextItem":{"title":"June 2022","permalink":"/semgrep-docs/release-notes/june-2022"}}')}}]);